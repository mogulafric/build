function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{E0oT:function(e,t,n){"use strict";n.r(t);var a=n("ofXK"),i=n("tyNb"),r=n("J7/z"),o=n("AlMu"),c=n("Olgc"),s=n("5JmO"),l=n.n(s),u=n("TruH"),b=n.n(u),f=n("uIk+"),d=n("fXoL");l.a.vfs=b.a.pdfMake.vfs;var h,p=((h=function(){function e(t){_classCallCheck(this,e),this.canvas=t}return _createClass(e,[{key:"setTitle",value:function(e,t,n,a,i,r,o){var c;return[{table:{widths:["100%","0%"],body:[[{image:e,alignment:"center",width:60,height:30}],[{text:t,fontSize:c="A6"===o?8:10,alignment:"center",bold:!0}],[{text:n,fontSize:c,alignment:"center"}],[{text:a,fontSize:c,alignment:"center",italics:!0}],[{text:i,fontSize:c,alignment:"center",italics:!0}]]},layout:"noBorders"}]}},{key:"createTableHeader",value:function(e){var t={fila_0:{}};return e.forEach((function(e,n){t.fila_0["col_"+(+n+1)]={text:e,style:"tableHeader",margin:[0,8,0,0]}})),t}},{key:"createBody",value:function(e,t){var n=[];for(var a in e){var i=[];for(var r in e[a])i.push(e[a][r]);n.push(i)}return t.forEach((function(e){var t=[];for(var a in e)t.push(e[a]);n.push(t)})),n}},{key:"getDocDefinition",value:function(e,t,n,a,i,r,o,c,s,l){var u,b,f,d={header:{title:e,header1:t,header2:n,header3:a},body:{header:r,record:o}},h=this.createBody(this.createTableHeader(d.body.header),d.body.record);return"A6"===l?(u=[10,110,10,55],b=10,f=7):(b=16,f=10,u=[10,110,10,55]),{pageOrientation:c,pageSize:l,pageMargins:u,header:this.setTitle(i,e,t,n,a,d,l),footer:function(e,t){return{text:"Page "+e.toString()+" of "+t,alignment:"center",margin:[0,30,0,0]}},content:[{style:"tableContent",table:{widths:s,headerRows:1,body:h}}],styles:{header:{fontSize:b,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:f}}}}},{key:"generatePdf",value:function(e){l.a.createPdf(e).print()}},{key:"getPdfData",value:function(e){var t=this,n=["25%","25%","25%","25%"],a=["Title","Name","Role","Phone Number"],i="Date: ".concat((new Date).toLocaleString());this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then((function(r){t.generatePdf(t.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",i,r,a,t.mapData(e),"portrait",n,"A4"))}))}},{key:"mapData",value:function(e){return e.map((function(e){return{Title:e.teacherTitle,Name:e.teacherName,Role:e.teacherRole,Contact:e.teacherContact}}))}}]),e}()).\u0275fac=function(e){return new(e||h)(d.Zb(f.a))},h.\u0275prov=d.Lb({token:h,factory:h.\u0275fac,providedIn:"root"}),h),g=n("RK+W"),v=n("7dYx"),m=n("fk4S"),y=n("rEr+"),S=n("7zfz"),k=n("3Pt+"),C=n("7kUa");function w(e,t){if(1&e&&(d.Vb(0,"th"),d.Ic(1),d.Ub()),2&e){var n=t.$implicit;d.Db(1),d.Kc(" ",n.header," ")}}function P(e,t){if(1&e&&(d.Vb(0,"tr",12),d.Gc(1,w,2,1,"th",13),d.Vb(2,"th"),d.Ic(3,"Action"),d.Ub(),d.Ub()),2&e){var n=d.gc();d.Db(1),d.nc("ngForOf",n.columns)}}function T(e,t){if(1&e&&(d.Vb(0,"td"),d.Vb(1,"div"),d.Ic(2),d.Ub(),d.Ub()),2&e){var n=t.$implicit,a=d.gc().$implicit;d.Db(2),d.Jc(a[n.field])}}var U=function(e){return["/main/teachers/","teacher-details",e]},V=function(e){return["/main/teachers/","teacher-edit",e]};function I(e,t){if(1&e){var n=d.Wb();d.Vb(0,"tr",12),d.Gc(1,T,3,1,"td",13),d.Vb(2,"td"),d.Vb(3,"div",14),d.Vb(4,"button",15),d.Ic(5,"View"),d.Ub(),d.Vb(6,"button",16),d.Ic(7,"Edit"),d.Ub(),d.Vb(8,"button",17),d.dc("click",(function(){d.zc(n);var e=t.$implicit;return d.gc().deleteTeacher(e._id)})),d.Ic(9,"Delete"),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){var a=t.$implicit,i=d.gc();d.Db(1),d.nc("ngForOf",i.columns),d.Db(3),d.nc("routerLink",d.qc(3,U,a._id)),d.Db(2),d.nc("routerLink",d.qc(5,V,a._id))}}function R(e,t){1&e&&(d.Vb(0,"tr"),d.Vb(1,"td"),d.Ic(2,"No data found."),d.Ub(),d.Ub())}var D,z,x=function(){return[5,10,25,50,100]},_=[{path:"",component:(D=function(){function e(t,n,a,i,r){_classCallCheck(this,e),this.dialogService=t,this.toastService=n,this.applicationStateService=a,this.teachersService=i,this.pdfService=r,this.teachers=[],this.isMobileResolution=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"teacherTitle",header:"Title"},{field:"teacherName",header:"Name"},{field:"teacherRole",header:"Role"},{field:"teacherContact",header:"Phone Number"}],this.getTeachers()}},{key:"getTeachers",value:function(){var e=this;this.teachersService.getTeachers().subscribe((function(t){e.teachers=t.data,e.toastService.addSingle("success","data Loaded","")}),(function(t){e.toastService.addSingle("error","sorry, we could not find the data","contact the admin for assistance")}))}},{key:"openNew",value:function(){var e=this;this.dialogService.open(g.a,{data:{},width:this.isMobileResolution?"400px":"600px"}).onClose.subscribe((function(t){t&&e.toastService.addSingle("success","panel closed","")}))}},{key:"exportPdf",value:function(){this.pdfService.getPdfData(this.teachers)}}]),e}(),D.\u0275fac=function(e){return new(e||D)(d.Pb(r.a),d.Pb(c.a),d.Pb(o.a),d.Pb(v.a),d.Pb(p))},D.\u0275cmp=d.Jb({type:D,selectors:[["app-teacher-list"]],features:[d.Cb([r.a])],decls:16,vars:10,consts:[["legend","Teachers",3,"toggleable"],["pRipple","",1,"btn","btn-success","btn-sm","m-1",3,"click"],["pRipple","","type","button","icon","pi pi-file-excel","tooltipPosition","bottom",1,"btn","btn-info","btn-sm","mx-2",3,"click"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","resizableColumns","scrollable","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"ui-g"],[1,"ui-g-10","ui-sm-8"],[2,"float","right"],[1,"ui-g-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],[1,"text-sm"],[4,"ngFor","ngForOf"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(e,t){1&e&&(d.Vb(0,"p-fieldset",0),d.Vb(1,"div"),d.Vb(2,"button",1),d.dc("click",(function(){return t.openNew()})),d.Ic(3,"Create Teacher"),d.Ub(),d.Vb(4,"button",2),d.dc("click",(function(){return t.exportPdf()})),d.Ic(5,"Teacher report"),d.Ub(),d.Ub(),d.Vb(6,"p-table",3),d.Gc(7,P,4,1,"ng-template",4),d.Gc(8,I,10,7,"ng-template",5),d.Gc(9,R,3,0,"ng-template",6),d.Ub(),d.Vb(10,"div",7),d.Vb(11,"div",8),d.Vb(12,"label",9),d.Ic(13,"Page Size:"),d.Ub(),d.Ub(),d.Vb(14,"div",10),d.Vb(15,"input",11),d.dc("ngModelChange",(function(e){return t.pageSize=e})),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.nc("toggleable",!0),d.Db(6),d.nc("value",t.teachers)("paginator",!0)("rows",t.pageSize)("resizableColumns",!0)("scrollable",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",d.pc(9,x)),d.Db(9),d.nc("ngModel",t.pageSize))},directives:[m.a,y.c,S.e,k.b,C.a,k.k,k.n,a.j,i.d],styles:[""]}),D)}],N=((z=function e(){_classCallCheck(this,e)}).\u0275mod=d.Nb({type:z}),z.\u0275inj=d.Mb({factory:function(e){return new(e||z)},imports:[[i.g.forChild(_)],i.g]}),z),O=n("EQGD"),M=n("K0h9");n.d(t,"TeacherListModule",(function(){return A}));var L,A=((L=function e(){_classCallCheck(this,e)}).\u0275mod=d.Nb({type:L}),L.\u0275inj=d.Mb({factory:function(e){return new(e||L)},imports:[[a.b,N,M.a,O.a]]}),L)},Olgc:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("fXoL"),i=n("7zfz"),r=function(){var e=function(){function e(t){_classCallCheck(this,e),this.messageService=t}return _createClass(e,[{key:"addSingle",value:function(e,t,n){this.messageService.add({severity:e,summary:t,detail:n})}},{key:"addMultiple",value:function(e){this.messageService.addAll(e)}},{key:"clear",value:function(){this.messageService.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Zb(i.d))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);