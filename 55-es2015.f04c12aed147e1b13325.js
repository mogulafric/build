(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{Olgc:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),o=n("7zfz");let r=(()=>{class e{constructor(e){this.messageService=e}addSingle(e,t,n){this.messageService.add({severity:e,summary:t,detail:n})}addMultiple(e){this.messageService.addAll(e)}clear(){this.messageService.clear()}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(o.d))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},im4Y:function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),o=n("tyNb"),r=n("J7/z"),a=n("AlMu"),s=n("Olgc"),c=n("Q+Ew"),d=n("9CIP"),l=n("7zfz"),u=n("5JmO"),b=n.n(u),p=n("TruH"),f=n.n(p),g=n("uIk+"),m=n("fXoL");b.a.vfs=f.a.pdfMake.vfs;let h=(()=>{class e{constructor(e){this.canvas=e}setTitle(e,t,n,i,o,r,a){let s,c;return"A6"===a?(s=[15,10,0,10],c=8):(s=[15,10,0,10],c=10),[{table:{widths:["100%","0%"],body:[[{image:e,alignment:"center",width:60,height:30}],[{text:t,fontSize:c,alignment:"center",bold:!0}],[{text:n,fontSize:c,alignment:"center"}],[{text:i,fontSize:c,alignment:"center",italics:!0}],[{text:o,fontSize:c,alignment:"center",italics:!0}]]},layout:"noBorders"}]}createTableHeader(e){const t={fila_0:{}};return e.forEach((e,n)=>{t.fila_0["col_"+(+n+1)]={text:e,style:"tableHeader",margin:[0,8,0,0]}}),t}createBody(e,t){const n=[];for(const i in e){const t=[];for(const n in e[i])t.push(e[i][n]);n.push(t)}return t.forEach(e=>{const t=[];for(const n in e)t.push(e[n]);n.push(t)}),n}getDocDefinition(e,t,n,i,o,r,a,s,c,d){const l={header:{title:e,header1:t,header2:n,header3:i},body:{header:r,record:a}},u=this.createBody(this.createTableHeader(l.body.header),l.body.record);let b,p,f;return"A6"===d?(b=[10,110,10,55],p=12,f=7):(p=16,f=12,b=[10,110,10,55]),{pageOrientation:s,pageSize:d,pageMargins:b,header:this.setTitle(o,e,t,n,i,l,d),footer:(e,t)=>({text:"Page "+e.toString()+" of "+t,alignment:"center",margin:[0,30,0,0]}),content:[{style:"tableContent",table:{widths:c,headerRows:1,body:u}}],styles:{header:{fontSize:p,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:f}}}}generatePdf(e){b.a.createPdf(e).print()}getPdfData(e){const t=["10%","25%","25%","20%","10%","10%"],n=["Adm Number","Student Name","Gender","pid Number","KcpeMarks","KcpeRank"],i=`Date: ${(new Date).toLocaleString()}`;this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then(o=>{this.generatePdf(this.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",i,o,n,this.mapData(e),"landscape",t,"A4"))})}mapData(e){return e.map(e=>{var t,n,i,o,r,a;return{AdmNo:null===(t=e)||void 0===t?void 0:t.admissionNumber,StudentName:null===(n=e)||void 0===n?void 0:n.studentName,Gender:null===(i=e)||void 0===i?void 0:i.gender,pidNumber:null===(o=e)||void 0===o?void 0:o.pidNumber,kcpeMarks:null===(r=e)||void 0===r?void 0:r.kcpeMarks,kcpeRank:null===(a=e)||void 0===a?void 0:a.kcpeRank}})}}return e.\u0275fac=function(t){return new(t||e)(m.Zb(g.a))},e.\u0275prov=m.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var S=n("fk4S"),v=n("rEr+"),y=n("3Pt+"),I=n("7kUa");function x(e,t){if(1&e&&(m.Vb(0,"th",16),m.Ic(1),m.Qb(2,"p-sortIcon",17),m.Ub()),2&e){const e=t.$implicit;m.nc("pSortableColumn",e.field),m.Db(1),m.Kc(" ",e.header," "),m.Db(1),m.nc("field",e.field)}}function w(e,t){if(1&e){const e=m.Wb();m.Vb(0,"input",19),m.dc("input",(function(t){m.zc(e);const n=m.gc().$implicit;return m.gc(2),m.yc(7).filter(t.target.value,n.field,n.filterMatchMode)})),m.Ub()}}function k(e,t){if(1&e&&(m.Vb(0,"th"),m.Gc(1,w,1,0,"input",18),m.Ub()),2&e){const e=t.$implicit;m.Db(1),m.nc("ngIf","stream"!=e.field)}}function N(e,t){if(1&e&&(m.Vb(0,"tr",13),m.Gc(1,x,3,3,"th",14),m.Vb(2,"th"),m.Ic(3,"Action"),m.Ub(),m.Ub(),m.Vb(4,"tr"),m.Gc(5,k,2,1,"th",15),m.Ub()),2&e){const e=m.gc();m.Db(1),m.nc("ngForOf",e.columns),m.Db(4),m.nc("ngForOf",e.columns)}}function U(e,t){if(1&e&&(m.Vb(0,"div"),m.Ic(1),m.Ub()),2&e){const e=m.gc().$implicit,t=m.gc().$implicit;m.Db(1),m.Jc(t[e.field])}}function V(e,t){if(1&e&&(m.Vb(0,"div"),m.Ic(1),m.Ub()),2&e){const e=m.gc().$implicit,t=m.gc().$implicit;m.Db(1),m.Jc(null==t[e.field]?null:t[e.field].streamName)}}function D(e,t){if(1&e&&(m.Vb(0,"td"),m.Gc(1,U,2,1,"div",24),m.Gc(2,V,2,1,"div",24),m.Ub()),2&e){const e=t.$implicit;m.Db(1),m.nc("ngIf","stream"!=e.field),m.Db(1),m.nc("ngIf","stream"==e.field)}}const P=function(e){return["/main/students/","student-details",e]},C=function(e){return["/main/students/","student-edit",e]};function z(e,t){if(1&e&&(m.Vb(0,"tr",20),m.Gc(1,D,3,2,"td",15),m.Vb(2,"td"),m.Vb(3,"div",21),m.Vb(4,"button",22),m.Ic(5,"View"),m.Ub(),m.Vb(6,"button",23),m.Ic(7,"Edit"),m.Ub(),m.Ub(),m.Ub(),m.Ub()),2&e){const e=t.$implicit,n=m.gc();m.Db(1),m.nc("ngForOf",n.columns),m.Db(3),m.nc("routerLink",m.qc(3,P,e._id)),m.Db(2),m.nc("routerLink",m.qc(5,C,e._id))}}function M(e,t){1&e&&(m.Vb(0,"tr"),m.Vb(1,"td",25),m.Ic(2,"No data found."),m.Ub(),m.Ub())}const O=function(){return[10,25,50,100]},R=[{path:"",component:(()=>{class e{constructor(e,t,n,i,o){this.dialogService=e,this.toastService=t,this.pdfService=n,this.applicationStateService=i,this.studentsService=o,this.students=[],this.isMobileResolution=!1}ngOnInit(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"admissionNumber",header:"adm Number"},{field:"studentName",header:"Student Name"},{field:"gender",header:"Gender"},{field:"pidNumber",header:"pid Number"},{field:"unitCurrent",header:"Class"},{field:"stream",header:"Stream"}],this.exportColumns=this.columns.map(e=>({title:e.header,dataKey:e.field})),this.getStudents()}getStudents(){this.studentsService.getStudents().subscribe(e=>{this.students=e.data,this.toastService.addSingle("success","Students Loaded","")},e=>{this.toastService.addSingle("error","sorry, we could not find the data","contact the admin for assitance")})}openNew(){this.dialogService.open(d.a,{data:{},width:this.isMobileResolution?"400px":"600px"}).onClose.subscribe(e=>{e&&this.toastService.addSingle("success","panel closed","")})}exportPdf(){this.pdfService.getPdfData(this.students)}}return e.\u0275fac=function(t){return new(t||e)(m.Pb(r.a),m.Pb(s.a),m.Pb(h),m.Pb(a.a),m.Pb(c.a))},e.\u0275cmp=m.Jb({type:e,selectors:[["app-student-list"]],features:[m.Cb([r.a,l.d])],decls:17,vars:10,consts:[["legend","Students",3,"toggleable"],["pRipple","",1,"btn","btn-success","btn-xs","btn-sm","m-1",3,"click"],["pRipple","","type","button","icon","pi pi-file-excel","tooltipPosition","bottom",1,"btn","btn-info","btn-xs","btn-sm","mx-2",3,"click"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","resizableColumns","scrollable","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"ui-g"],[1,"ui-sm-10","ui-sm-8"],[2,"float","right"],[1,"ui-sm-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],[1,"text-xs"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["pInputText","","type","text",3,"input",4,"ngIf"],["pInputText","","type","text",3,"input"],[1,"text-xs","text-sm"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-xs","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-xs","btn-sm",2,"margin-right","16px",3,"routerLink"],[4,"ngIf"],["colspan","5"]],template:function(e,t){1&e&&(m.Vb(0,"p-fieldset",0),m.Vb(1,"div"),m.Vb(2,"button",1),m.dc("click",(function(){return t.openNew()})),m.Ic(3,"Create New Student"),m.Ub(),m.Vb(4,"button",2),m.dc("click",(function(){return t.exportPdf()})),m.Ic(5,"student report"),m.Ub(),m.Ub(),m.Vb(6,"p-table",3,4),m.Gc(8,N,6,2,"ng-template",5),m.Gc(9,z,8,7,"ng-template",6),m.Gc(10,M,3,0,"ng-template",7),m.Ub(),m.Vb(11,"div",8),m.Vb(12,"div",9),m.Vb(13,"label",10),m.Ic(14,"Page Size:"),m.Ub(),m.Ub(),m.Vb(15,"div",11),m.Vb(16,"input",12),m.dc("ngModelChange",(function(e){return t.pageSize=e})),m.Ub(),m.Ub(),m.Ub(),m.Ub()),2&e&&(m.nc("toggleable",!0),m.Db(6),m.nc("value",t.students)("paginator",!0)("resizableColumns",!0)("scrollable",!0)("rows",t.pageSize)("showCurrentPageReport",!0)("rowsPerPageOptions",m.pc(9,O)),m.Db(10),m.nc("ngModel",t.pageSize))},directives:[S.a,v.c,l.e,y.b,I.a,y.k,y.n,i.j,v.b,v.a,i.k,o.d],styles:[""]}),e})()}];let T=(()=>{class e{}return e.\u0275mod=m.Nb({type:e}),e.\u0275inj=m.Mb({factory:function(t){return new(t||e)},imports:[[o.g.forChild(R)],o.g]}),e})();var G=n("EQGD"),L=n("K0h9");n.d(t,"StudentListModule",(function(){return A}));let A=(()=>{class e{}return e.\u0275mod=m.Nb({type:e}),e.\u0275inj=m.Mb({factory:function(t){return new(t||e)},imports:[[i.b,T,L.a,G.a]]}),e})()}}]);