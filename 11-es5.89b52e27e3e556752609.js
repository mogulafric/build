function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"4hmF":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("tk/3"),i=r("z6cu"),c=r("JIr8"),a=r("AytR"),o=r("fXoL"),s=function(){var e=function(){function e(t){_classCallCheck(this,e),this.httpClient=t,this.apiURL=a.a.apiUrl,this.httpOptions={headers:new n.c({"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Origin":"*","Cross-Origin":"true","Access-Control-Allow-Methods":"GET, POST, PATCH, DELETE, PUT, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",Authorization:"Bearer "+localStorage.getItem("jwt")})}}return _createClass(e,[{key:"getSubjects",value:function(){return this.httpClient.get(this.apiURL+"/subjects/getallsubjects",this.httpOptions).pipe(Object(c.a)(this.errorHandler))}},{key:"getSubject",value:function(e){return this.httpClient.get(this.apiURL+"/subjects/getsubjectbuid/"+e,this.httpOptions)}},{key:"createSubject",value:function(e){return this.httpClient.post(this.apiURL+"/subjects/registersubject",JSON.stringify(e),this.httpOptions).pipe(Object(c.a)(this.errorHandler))}},{key:"updateSubject",value:function(e,t){return this.httpClient.patch(this.apiURL+"/subjects/updatesubject",JSON.stringify(t),this.httpOptions).pipe(Object(c.a)(this.errorHandler))}},{key:"deleteSubject",value:function(e){return this.httpClient.delete(this.apiURL+"/subjects/archive/"+e,this.httpOptions).pipe(Object(c.a)(this.errorHandler))}},{key:"errorHandler",value:function(e){var t="";return e.error instanceof ErrorEvent?(t=e.error.message,console.log("Client Side Error",t)):(t="Server Side Error Code: ".concat(e.status,"\n Message: ").concat(e.message),console.log(t)),Object(i.a)(console.log(t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Zb(n.a))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},DNhi:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("tk/3"),i=r("z6cu"),c=r("JIr8"),a=r("AytR"),o=r("fXoL"),s=function(){var e=function(){function e(t){_classCallCheck(this,e),this.httpClient=t,this.apiURL=a.a.apiUrl,this.httpOptions={headers:new n.c({"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Origin":"*","Cross-Origin":"true","Access-Control-Allow-Methods":"GET, POST, PATCH, DELETE, PUT, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",Authorization:"Bearer "+localStorage.getItem("jwt")})}}return _createClass(e,[{key:"getSubjectTeachers",value:function(){return this.httpClient.get("".concat(this.apiURL,"/subjects/getallsubjectteacherspersclass"),this.httpOptions).pipe(Object(c.a)(this.errorHandler))}},{key:"getSubjectTeacher",value:function(e){return this.httpClient.get("".concat(this.apiURL,"/subjects/getsubjectteacherperclassbyid/").concat(e),this.httpOptions).pipe(Object(c.a)(this.errorHandler))}},{key:"createSubjectTeacher",value:function(e){return this.httpClient.post(this.apiURL+"/subjects/registersubjectteacherperclass",JSON.stringify(e),this.httpOptions).pipe(Object(c.a)(this.errorHandler))}},{key:"updateSubjectTeacher",value:function(e,t){return this.httpClient.patch("".concat(this.apiURL,"/subjects/getsubjectteacherperclassbyid"),JSON.stringify(t),this.httpOptions).pipe(Object(c.a)(this.errorHandler))}},{key:"deleteSubjectTeacher",value:function(e){return this.httpClient.delete("".concat(this.apiURL,"/subjects/archive"),this.httpOptions).pipe(Object(c.a)(this.errorHandler))}},{key:"errorHandler",value:function(e){var t="";return e.error instanceof ErrorEvent?(t=e.error.message,console.log("Client Side Error",t)):(t="Server Side Error Code: ".concat(e.status,"\n Message: ").concat(e.message),console.log(t)),Object(i.a)(console.log(t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Zb(n.a))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},EUaX:function(e,t,r){"use strict";r.r(t);var n=r("ofXK"),i=r("tyNb"),c=r("7zfz"),a=r("J7/z"),o=r("AlMu"),s=r("Olgc"),u=r("3Pt+"),l=r("4hmF"),b=r("xHgC"),h=r("7dYx"),p=r("DNhi"),d=r("fXoL");function f(e,t){if(1&e&&(d.Vb(0,"option",19),d.Ic(1),d.Ub()),2&e){var r=t.$implicit;d.nc("value",r._id),d.Db(1),d.Kc(" ",r.teacherName," ")}}function g(e,t){if(1&e&&(d.Vb(0,"option",19),d.Ic(1),d.Ub()),2&e){var r=t.$implicit;d.nc("value",r._id),d.Db(1),d.Kc(" ",r.subjectName," ")}}function v(e,t){if(1&e&&(d.Vb(0,"option",19),d.Ic(1),d.Ub()),2&e){var r=t.$implicit;d.nc("value",r._id),d.Db(1),d.Kc(" ",r.unitName," ")}}var S,C=((S=function(){function e(t,r,n,i,c,a,o,s,l){_classCallCheck(this,e),this.ref=t,this.subjectTeacherService=r,this.teacherService=n,this.subjectService=i,this.classService=c,this.toastService=a,this.router=o,this.formBuilder=s,this.ngZone=l,this.teachers=[],this.subjects=[],this.classes=[],this.createForm=this.formBuilder.group({subjectID:["",u.u.required],teacherID:["",u.u.required],unitID:["",u.u.required]})}return _createClass(e,[{key:"ngOnInit",value:function(){this.getTeacherService(),this.getSubjectService(),this.getClassService()}},{key:"getTeacherService",value:function(){var e=this;this.teacherService.getTeachers().subscribe((function(t){e.teachers=t.data}),(function(t){e.toastService.addSingle("error","sorry, an error occurred try again","")}))}},{key:"getSubjectService",value:function(){var e=this;this.subjectService.getSubjects().subscribe((function(t){e.subjects=t.data}),(function(t){e.toastService.addSingle("error","sorry, an error occurred try again","")}))}},{key:"getClassService",value:function(){var e=this;this.classService.getClasses().subscribe((function(t){e.classes=t.data}),(function(t){e.toastService.addSingle("error","sorry, an error occurred try again","")}))}},{key:"onSubmit",value:function(e){var t=this;this.subjectTeacherService.createSubjectTeacher(e.value).subscribe((function(){var e=t.router.url;t.router.navigateByUrl("/",{skipLocationChange:!0}).then((function(){t.router.navigate([e]),t.toastService.addSingle("success","data added successfully","")}),(function(){t.toastService.addSingle("error","sorry, an error occurred try again","")})),t.ref.close(!0)}))}},{key:"Cancel",value:function(){this.ref.close(!0)}}]),e}()).\u0275fac=function(e){return new(e||S)(d.Pb(a.c),d.Pb(p.a),d.Pb(h.a),d.Pb(l.a),d.Pb(b.a),d.Pb(s.a),d.Pb(i.c),d.Pb(u.c),d.Pb(d.A))},S.\u0275cmp=d.Jb({type:S,selectors:[["app-create-subject-teacher"]],decls:36,vars:5,consts:[[1,"scroll",3,"formGroup","ngSubmit"],[1,"card","card-info"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],["for","teacherID"],["formControlName","teacherID","id","teacherID",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","subjectID"],["formControlName","subjectID","id","subjectID",1,"form-control"],["for","unitID"],["formControlName","unitID","id","unitID",1,"form-control"],[1,"card-footer"],["type","submit",1,"btn","btn-info","mx-2",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[3,"value"]],template:function(e,t){1&e&&(d.Vb(0,"form",0),d.dc("ngSubmit",(function(){return t.onSubmit(t.createForm)})),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"h3",3),d.Ic(4," Add SubjectTeacher"),d.Ub(),d.Ub(),d.Vb(5,"div",4),d.Vb(6,"div",5),d.Vb(7,"div",6),d.Vb(8,"div",7),d.Vb(9,"label",8),d.Ic(10,"Teacher"),d.Ub(),d.Vb(11,"select",9),d.Vb(12,"option",10),d.Ic(13,"--Select teacher--"),d.Ub(),d.Gc(14,f,2,2,"option",11),d.Ub(),d.Ub(),d.Ub(),d.Vb(15,"div",6),d.Vb(16,"div",7),d.Vb(17,"label",12),d.Ic(18,"Subject"),d.Ub(),d.Vb(19,"select",13),d.Vb(20,"option",10),d.Ic(21,"--Select subject--"),d.Ub(),d.Gc(22,g,2,2,"option",11),d.Ub(),d.Ub(),d.Ub(),d.Vb(23,"div",6),d.Vb(24,"div",7),d.Vb(25,"label",14),d.Ic(26,"Class"),d.Ub(),d.Vb(27,"select",15),d.Vb(28,"option",10),d.Ic(29,"--Select class--"),d.Ub(),d.Gc(30,v,2,2,"option",11),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(31,"div",16),d.Vb(32,"button",17),d.Ic(33,"Create"),d.Ub(),d.Vb(34,"button",18),d.dc("click",(function(){return t.Cancel()})),d.Ic(35,"Cancel"),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.nc("formGroup",t.createForm),d.Db(14),d.nc("ngForOf",t.teachers),d.Db(8),d.nc("ngForOf",t.subjects),d.Db(8),d.nc("ngForOf",t.classes),d.Db(2),d.nc("disabled",!t.createForm.valid))},directives:[u.w,u.l,u.f,u.t,u.k,u.e,u.o,u.v,n.j],styles:[""]}),S),m=r("5JmO"),y=r.n(m),j=r("TruH"),k=r.n(j),U=r("uIk+");y.a.vfs=k.a.pdfMake.vfs;var O,I=((O=function(){function e(t){_classCallCheck(this,e),this.canvas=t}return _createClass(e,[{key:"setTitle",value:function(e,t,r,n,i,c,a){var o;return[{table:{widths:["100%","0%"],body:[[{image:e,alignment:"center",width:60,height:30}],[{text:t,fontSize:o="A6"===a?8:10,alignment:"center",bold:!0}],[{text:r,fontSize:o,alignment:"center"}],[{text:n,fontSize:o,alignment:"center",italics:!0}],[{text:i,fontSize:o,alignment:"center",italics:!0}]]},layout:"noBorders"}]}},{key:"createTableHeader",value:function(e){var t={fila_0:{}};return e.forEach((function(e,r){t.fila_0["col_"+(+r+1)]={text:e,style:"tableHeader",margin:[0,8,0,0]}})),t}},{key:"createBody",value:function(e,t){var r=[];for(var n in e){var i=[];for(var c in e[n])i.push(e[n][c]);r.push(i)}return t.forEach((function(e){var t=[];for(var n in e)t.push(e[n]);r.push(t)})),r}},{key:"getDocDefinition",value:function(e,t,r,n,i,c,a,o,s,u){var l,b,h,p={header:{title:e,header1:t,header2:r,header3:n},body:{header:c,record:a}},d=this.createBody(this.createTableHeader(p.body.header),p.body.record);return"A6"===u?(l=[10,110,10,55],b=10,h=7):(b=16,h=10,l=[10,110,10,55]),{pageOrientation:o,pageSize:u,pageMargins:l,header:this.setTitle(i,e,t,r,n,p,u),footer:function(e,t){return{text:"Page "+e.toString()+" of "+t,alignment:"center",margin:[0,30,0,0]}},content:[{style:"tableContent",table:{widths:s,headerRows:1,body:d}}],styles:{header:{fontSize:b,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:h}}}}},{key:"generatePdf",value:function(e){y.a.createPdf(e).print()}},{key:"getPdfData",value:function(e){var t=this,r=["50%","50%"],n=["Teacher","Subject"],i="Date: ".concat((new Date).toLocaleString());this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then((function(c){t.generatePdf(t.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",i,c,n,t.mapData(e),"portrait",r,"A4"))}))}},{key:"mapData",value:function(e){return e.map((function(e){return{AdmNo:e.teacherID,StudentName:e.subjectID}}))}}]),e}()).\u0275fac=function(e){return new(e||O)(d.Zb(U.a))},O.\u0275prov=d.Lb({token:O,factory:O.\u0275fac,providedIn:"root"}),O),T=r("fk4S"),w=r("rEr+"),A=r("7kUa");function D(e,t){1&e&&(d.Vb(0,"tr",11),d.Vb(1,"th"),d.Ic(2,"Teacher Name"),d.Ub(),d.Vb(3,"th"),d.Ic(4,"subject Name"),d.Ub(),d.Vb(5,"th"),d.Ic(6,"Class"),d.Ub(),d.Vb(7,"th"),d.Ic(8,"Action"),d.Ub(),d.Ub())}var V=function(e){return["/main/subjectTeachers/","subjectTeacher-details",e]},P=function(e){return["/main/subjectTeachers/","subjectTeacher-edit",e]};function L(e,t){if(1&e){var r=d.Wb();d.Vb(0,"tr",11),d.Vb(1,"td"),d.Ic(2),d.Ub(),d.Vb(3,"td"),d.Ic(4),d.Ub(),d.Vb(5,"td"),d.Ic(6),d.Ub(),d.Vb(7,"td"),d.Vb(8,"div",12),d.Vb(9,"button",13),d.Ic(10,"View"),d.Ub(),d.Vb(11,"button",14),d.Ic(12,"Edit"),d.Ub(),d.Vb(13,"button",15),d.dc("click",(function(){d.zc(r);var e=t.$implicit;return d.gc().deleteSubjectTeacher(e._id)})),d.Ic(14,"Delete"),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){var n=t.$implicit;d.Db(2),d.Jc(null==n.teacherID[0]?null:n.teacherID[0].teacherName),d.Db(2),d.Jc(null==n.subjectID?null:n.subjectID.subjectName),d.Db(2),d.Jc(null==n.unitID?null:n.unitID.unitName),d.Db(3),d.nc("routerLink",d.qc(5,V,n._id)),d.Db(2),d.nc("routerLink",d.qc(7,P,n._id))}}var R,N,H=function(){return[5,10,25,50,100]},E=[{path:"",component:(R=function(){function e(t,r,n,i,c){_classCallCheck(this,e),this.dialogService=t,this.toastService=r,this.pdfService=n,this.applicationStateService=i,this.subjectTeachersService=c,this.subjectTeachers=[],this.isMobileResolution=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"TeacherID",header:"Teacher Name"},{field:"subjectID",header:"subject Name"}],this.exportColumns=this.columns.map((function(e){return{title:e.header,dataKey:e.field}})),this.getSubjectTeachers()}},{key:"getSubjectTeachers",value:function(){var e=this;this.subjectTeachersService.getSubjectTeachers().subscribe((function(t){e.subjectTeachers=t.data,console.log(t.data),e.toastService.addSingle("success","data Loaded","")}),(function(t){e.toastService.addSingle("error","sorry, we could not find the data","contact the admin for assistance")}))}},{key:"openNew",value:function(){var e=this;this.dialogService.open(C,{data:{},width:this.isMobileResolution?"40%":"60%"}).onClose.subscribe((function(t){t&&e.toastService.addSingle("success","panel closed","")}))}},{key:"exportPdf",value:function(){this.pdfService.getPdfData(this.subjectTeachers)}}]),e}(),R.\u0275fac=function(e){return new(e||R)(d.Pb(a.a),d.Pb(s.a),d.Pb(I),d.Pb(o.a),d.Pb(p.a))},R.\u0275cmp=d.Jb({type:R,selectors:[["app-list-subject-teacher"]],features:[d.Cb([a.a,c.d])],decls:15,vars:10,consts:[["legend","SubjectTeachers",3,"toggleable"],["pRipple","",1,"btn","btn-success","btn-sm","m-1",3,"click"],["pRipple","","type","button","icon","pi pi-file-excel","tooltipPosition","bottom",1,"btn","btn-info","btn-sm","mx-2",3,"click"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","resizableColumns","scrollable","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[1,"ui-g"],[1,"ui-g-10","ui-sm-8"],[2,"float","right"],[1,"ui-g-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],[1,"text-sm"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(e,t){1&e&&(d.Vb(0,"p-fieldset",0),d.Vb(1,"div"),d.Vb(2,"button",1),d.dc("click",(function(){return t.openNew()})),d.Ic(3,"Create subjectTeacher"),d.Ub(),d.Vb(4,"button",2),d.dc("click",(function(){return t.exportPdf()})),d.Ic(5,"subjectTeacher report"),d.Ub(),d.Ub(),d.Vb(6,"p-table",3),d.Gc(7,D,9,0,"ng-template",4),d.Gc(8,L,15,9,"ng-template",5),d.Ub(),d.Vb(9,"div",6),d.Vb(10,"div",7),d.Vb(11,"label",8),d.Ic(12,"Page Size:"),d.Ub(),d.Ub(),d.Vb(13,"div",9),d.Vb(14,"input",10),d.dc("ngModelChange",(function(e){return t.pageSize=e})),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.nc("toggleable",!0),d.Db(6),d.nc("value",t.subjectTeachers)("paginator",!0)("resizableColumns",!0)("scrollable",!0)("rows",t.pageSize)("showCurrentPageReport",!0)("rowsPerPageOptions",d.pc(9,H)),d.Db(8),d.nc("ngModel",t.pageSize))},directives:[T.a,w.c,c.e,u.b,A.a,u.k,u.n,i.d],styles:[""]}),R)}],_=((N=function e(){_classCallCheck(this,e)}).\u0275mod=d.Nb({type:N}),N.\u0275inj=d.Mb({factory:function(e){return new(e||N)},imports:[[i.g.forChild(E)],i.g]}),N),z=r("EQGD"),x=r("K0h9");r.d(t,"ListSubjectTeacherModule",(function(){return J}));var M,J=((M=function e(){_classCallCheck(this,e)}).\u0275mod=d.Nb({type:M}),M.\u0275inj=d.Mb({factory:function(e){return new(e||M)},imports:[[n.b,_,x.a,z.a]]}),M)},Olgc:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("fXoL"),i=r("7zfz"),c=function(){var e=function(){function e(t){_classCallCheck(this,e),this.messageService=t}return _createClass(e,[{key:"addSingle",value:function(e,t,r){this.messageService.add({severity:e,summary:t,detail:r})}},{key:"addMultiple",value:function(e){this.messageService.addAll(e)}},{key:"clear",value:function(){this.messageService.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Zb(i.d))},e.\u0275prov=n.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},xHgC:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("tk/3"),i=r("z6cu"),c=r("JIr8"),a=r("AytR"),o=r("fXoL"),s=function(){var e=function(){function e(t){_classCallCheck(this,e),this.httpClient=t,this.apiURL=a.a.apiUrl,this.httpOptions={headers:new n.c({"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Origin":"*","Cross-Origin":"true","Access-Control-Allow-Methods":"GET, POST, PATCH, DELETE, PUT, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",Authorization:"Bearer "+localStorage.getItem("jwt")})}}return _createClass(e,[{key:"getClasses",value:function(){return this.httpClient.get(this.apiURL+"/units/getallunits",this.httpOptions).pipe(Object(c.a)(this.errorHandler))}},{key:"getClass",value:function(e){return this.httpClient.get("".concat(this.apiURL,"/units/getunit/").concat(e),this.httpOptions).pipe(Object(c.a)(this.errorHandler))}},{key:"createClass",value:function(e){return this.httpClient.post("".concat(this.apiURL,"/units/registerunit"),JSON.stringify(e),this.httpOptions).pipe(Object(c.a)(this.errorHandler))}},{key:"updateClass",value:function(e,t){return this.httpClient.patch("".concat(this.apiURL,"/units/updateunit"),JSON.stringify(t),this.httpOptions).pipe(Object(c.a)(this.errorHandler))}},{key:"deleteClass",value:function(e){return this.httpClient.delete("".concat(this.apiURL,"/units/archive/").concat(e),this.httpOptions).pipe(Object(c.a)(this.errorHandler))}},{key:"errorHandler",value:function(e){var t="";return e.error instanceof ErrorEvent?(t=e.error.message,console.log("Client Side Error",t)):(t="Server Side Error Code: ".concat(e.status,"\n Message: ").concat(e.message),console.log(t)),Object(i.a)(console.log(t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Zb(n.a))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);