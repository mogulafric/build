(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"4hmF":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var i=r("tk/3"),o=r("z6cu"),s=r("JIr8"),n=r("AytR"),c=r("fXoL");let a=(()=>{class t{constructor(t){this.httpClient=t,this.apiURL=n.a.apiUrl,this.httpOptions={headers:new i.c({"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Origin":"*","Cross-Origin":"true","Access-Control-Allow-Methods":"GET, POST, PATCH, DELETE, PUT, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",Authorization:"Bearer "+localStorage.getItem("jwt")})}}getSubjects(){return this.httpClient.get(this.apiURL+"/subjects/getallsubjects",this.httpOptions).pipe(Object(s.a)(this.errorHandler))}getSubject(t){return this.httpClient.get(this.apiURL+"/subjects/getsubjectbuid/"+t,this.httpOptions)}createSubject(t){return this.httpClient.post(this.apiURL+"/subjects/registersubject",JSON.stringify(t),this.httpOptions).pipe(Object(s.a)(this.errorHandler))}updateSubject(t,e){return this.httpClient.patch(this.apiURL+"/subjects/updatesubject",JSON.stringify(e),this.httpOptions).pipe(Object(s.a)(this.errorHandler))}deleteSubject(t){return this.httpClient.delete(this.apiURL+"/subjects/archive/"+t,this.httpOptions).pipe(Object(s.a)(this.errorHandler))}errorHandler(t){let e="";return t.error instanceof ErrorEvent?(e=t.error.message,console.log("Client Side Error",e)):(e=`Server Side Error Code: ${t.status}\n Message: ${t.message}`,console.log(e)),Object(o.a)(console.log(e))}}return t.\u0275fac=function(e){return new(e||t)(c.Zb(i.a))},t.\u0275prov=c.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Olgc:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var i=r("fXoL"),o=r("7zfz");let s=(()=>{class t{constructor(t){this.messageService=t}addSingle(t,e,r){this.messageService.add({severity:t,summary:e,detail:r})}addMultiple(t){this.messageService.addAll(t)}clear(){this.messageService.clear()}}return t.\u0275fac=function(e){return new(e||t)(i.Zb(o.d))},t.\u0275prov=i.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},ST0Q:function(t,e,r){"use strict";r.r(e);var i=r("ofXK"),o=r("tyNb"),s=r("7zfz"),n=r("J7/z"),c=r("AlMu"),a=r("Olgc"),l=r("7vv+"),u=r("5JmO"),p=r.n(u),b=r("TruH"),d=r.n(b),h=r("uIk+"),g=r("fXoL");p.a.vfs=d.a.pdfMake.vfs;let f=(()=>{class t{constructor(t){this.canvas=t}setTitle(t,e,r,i,o,s,n){let c,a;return"A6"===n?(c=[15,10,0,10],a=8):(c=[15,10,0,10],a=10),[{table:{widths:["100%","0%"],body:[[{image:t,alignment:"center",width:60,height:30}],[{text:e,fontSize:a,alignment:"center",bold:!0}],[{text:r,fontSize:a,alignment:"center"}],[{text:i,fontSize:a,alignment:"center",italics:!0}],[{text:o,fontSize:a,alignment:"center",italics:!0}]]},layout:"noBorders"}]}createTableHeader(t){const e={fila_0:{}};return t.forEach((t,r)=>{e.fila_0["col_"+(+r+1)]={text:t,style:"tableHeader",margin:[0,8,0,0]}}),e}createBody(t,e){const r=[];for(const i in t){const e=[];for(const r in t[i])e.push(t[i][r]);r.push(e)}return e.forEach(t=>{const e=[];for(const r in t)e.push(t[r]);r.push(e)}),r}getDocDefinition(t,e,r,i,o,s,n,c,a,l){const u={header:{title:t,header1:e,header2:r,header3:i},body:{header:s,record:n}},p=this.createBody(this.createTableHeader(u.body.header),u.body.record);let b,d,h;return"A6"===l?(b=[10,110,10,55],d=10,h=7):(d=16,h=10,b=[10,110,10,55]),{pageOrientation:c,pageSize:l,pageMargins:b,header:this.setTitle(o,t,e,r,i,u,l),footer:(t,e)=>({text:"Page "+t.toString()+" of "+e,alignment:"center",margin:[0,30,0,0]}),content:[{style:"tableContent",table:{widths:a,headerRows:1,body:p}}],styles:{header:{fontSize:d,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:h}}}}generatePdf(t){p.a.createPdf(t).print()}getPdfData(t){const e=["50%","50%"],r=["Name","Subject"],i=`Date: ${(new Date).toLocaleString()}`;this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then(o=>{this.generatePdf(this.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",i,o,r,this.mapData(t),"portrait",e,"A4"))})}mapData(t){return t.map(t=>({AdmNo:t.groupName,StudentName:t.subjectID}))}}return t.\u0275fac=function(e){return new(e||t)(g.Zb(h.a))},t.\u0275prov=g.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=r("WsT8"),S=r("fk4S"),j=r("rEr+"),v=r("3Pt+"),O=r("7kUa");function C(t,e){if(1&t&&(g.Vb(0,"th"),g.Ic(1),g.Ub()),2&t){const t=e.$implicit;g.Db(1),g.Kc(" ",t.header," ")}}function w(t,e){if(1&t&&(g.Vb(0,"tr",11),g.Gc(1,C,2,1,"th",12),g.Vb(2,"th"),g.Ic(3,"Action"),g.Ub(),g.Ub()),2&t){const t=g.gc();g.Db(1),g.nc("ngForOf",t.columns)}}function y(t,e){if(1&t&&(g.Vb(0,"td"),g.Vb(1,"div"),g.Ic(2),g.Ub(),g.Ub()),2&t){const t=e.$implicit,r=g.gc().$implicit;g.Db(2),g.Jc(r[t.field])}}const A=function(t){return["/main/subjectGroups/","subjectGroup-details",t]},U=function(t){return["/main/subjectGroups/","subjectGroup-edit",t]};function I(t,e){if(1&t){const t=g.Wb();g.Vb(0,"tr",11),g.Gc(1,y,3,1,"td",12),g.Vb(2,"td"),g.Vb(3,"div",13),g.Vb(4,"button",14),g.Ic(5,"View"),g.Ub(),g.Vb(6,"button",15),g.Ic(7,"Edit"),g.Ub(),g.Vb(8,"button",16),g.dc("click",(function(){g.zc(t);const r=e.$implicit;return g.gc().deleteSubjectGroup(r._id)})),g.Ic(9,"Delete"),g.Ub(),g.Ub(),g.Ub(),g.Ub()}if(2&t){const t=e.$implicit,r=g.gc();g.Db(1),g.nc("ngForOf",r.columns),g.Db(3),g.nc("routerLink",g.qc(3,A,t._id)),g.Db(2),g.nc("routerLink",g.qc(5,U,t._id))}}const P=function(){return[5,10,25,50,100]},R=[{path:"",component:(()=>{class t{constructor(t,e,r,i,o){this.dialogService=t,this.toastService=e,this.pdfService=r,this.applicationStateService=i,this.subjectGroupsService=o,this.subjectGroups=[],this.isMobileResolution=!1}ngOnInit(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"groupName",header:"Group Name"},{field:"subjectID.subjectName",header:"subject Name"},{field:"groupShortName",header:"Short Form"}],this.exportColumns=this.columns.map(t=>({title:t.header,dataKey:t.field})),this.getSubjectGroups()}getSubjectGroups(){this.subjectGroupsService.getSubjectGroups().subscribe(t=>{this.subjectGroups=t.data,this.toastService.addSingle("success","data Loaded","")},t=>{this.toastService.addSingle("error","sorry, we could not find the data","contact the admin for assistance")})}openNew(){this.dialogService.open(l.a,{data:{},width:this.isMobileResolution?"400px":"600px"}).onClose.subscribe(t=>{t&&this.toastService.addSingle("success","panel closed","")})}exportPdf(){this.pdfService.getPdfData(this.subjectGroups)}}return t.\u0275fac=function(e){return new(e||t)(g.Pb(n.a),g.Pb(a.a),g.Pb(f),g.Pb(c.a),g.Pb(m.a))},t.\u0275cmp=g.Jb({type:t,selectors:[["app-list-subject-group"]],features:[g.Cb([n.a,s.d])],decls:15,vars:10,consts:[["legend","subjectGroups",3,"toggleable"],["pRipple","",1,"btn","btn-success","btn-sm","m-1",3,"click"],["pRipple","","type","button","icon","pi pi-file-excel","tooltipPosition","bottom",1,"btn","btn-info","btn-sm","mx-2",3,"click"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","resizableColumns","scrollable","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[1,"ui-g"],[1,"ui-g-10","ui-sm-8"],[2,"float","right"],[1,"ui-g-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],[1,"text-sm"],[4,"ngFor","ngForOf"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(t,e){1&t&&(g.Vb(0,"p-fieldset",0),g.Vb(1,"div"),g.Vb(2,"button",1),g.dc("click",(function(){return e.openNew()})),g.Ic(3,"Create subjectGroup"),g.Ub(),g.Vb(4,"button",2),g.dc("click",(function(){return e.exportPdf()})),g.Ic(5,"subjectGroup report"),g.Ub(),g.Ub(),g.Vb(6,"p-table",3),g.Gc(7,w,4,1,"ng-template",4),g.Gc(8,I,10,7,"ng-template",5),g.Ub(),g.Vb(9,"div",6),g.Vb(10,"div",7),g.Vb(11,"label",8),g.Ic(12,"Page Size:"),g.Ub(),g.Ub(),g.Vb(13,"div",9),g.Vb(14,"input",10),g.dc("ngModelChange",(function(t){return e.pageSize=t})),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&t&&(g.nc("toggleable",!0),g.Db(6),g.nc("value",e.subjectGroups)("paginator",!0)("resizableColumns",!0)("scrollable",!0)("rows",e.pageSize)("showCurrentPageReport",!0)("rowsPerPageOptions",g.pc(9,P)),g.Db(8),g.nc("ngModel",e.pageSize))},directives:[S.a,j.c,s.e,v.b,O.a,v.k,v.n,i.j,o.d],styles:[""]}),t})()}];let G=(()=>{class t{}return t.\u0275mod=g.Nb({type:t}),t.\u0275inj=g.Mb({factory:function(e){return new(e||t)},imports:[[o.g.forChild(R)],o.g]}),t})();var L=r("EQGD"),T=r("K0h9");r.d(e,"ListSubjectGroupModule",(function(){return z}));let z=(()=>{class t{}return t.\u0275mod=g.Nb({type:t}),t.\u0275inj=g.Mb({factory:function(e){return new(e||t)},imports:[[i.b,G,T.a,L.a]]}),t})()},WsT8:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var i=r("tk/3"),o=r("z6cu"),s=r("JIr8"),n=r("AytR"),c=r("fXoL");let a=(()=>{class t{constructor(t){this.httpClient=t,this.apiURL=n.a.apiUrl,this.httpOptions={headers:new i.c({"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Origin":"*","Cross-Origin":"true","Access-Control-Allow-Methods":"GET, POST, PATCH, DELETE, PUT, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",Authorization:"Bearer "+localStorage.getItem("jwt")})}}getSubjectGroups(){return this.httpClient.get(`${this.apiURL}/subjects/getallsubjectgroup`,this.httpOptions).pipe(Object(s.a)(this.errorHandler))}getSubjectGroup(t){return this.httpClient.get(`${this.apiURL}/subjects/getsubjectgroupbyid/${t}`,this.httpOptions).pipe(Object(s.a)(this.errorHandler))}createSubjectGroup(t){return this.httpClient.post(this.apiURL+"/subjects/registergroup",JSON.stringify(t),this.httpOptions).pipe(Object(s.a)(this.errorHandler))}updateSubjectGroup(t,e){return this.httpClient.patch(`${this.apiURL}/subjects/updatesubjectgroup`,JSON.stringify(e),this.httpOptions).pipe(Object(s.a)(this.errorHandler))}deleteSubjectGroup(t){return this.httpClient.delete(`${this.apiURL}/subjects/archive`,this.httpOptions).pipe(Object(s.a)(this.errorHandler))}errorHandler(t){let e="";return t.error instanceof ErrorEvent?(e=t.error.message,console.log("Client Side Error",e)):(e=`Server Side Error Code: ${t.status}\n Message: ${t.message}`,console.log(e)),Object(o.a)(console.log(e))}}return t.\u0275fac=function(e){return new(e||t)(c.Zb(i.a))},t.\u0275prov=c.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);