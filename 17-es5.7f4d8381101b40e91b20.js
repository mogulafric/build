function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"4hmF":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("tk/3"),i=n("z6cu"),o=n("JIr8"),a=n("AytR"),s=n("fXoL"),c=function(){var e=function(){function e(t){_classCallCheck(this,e),this.httpClient=t,this.apiURL=a.a.apiUrl,this.httpOptions={headers:new r.c({"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Origin":"*","Cross-Origin":"true","Access-Control-Allow-Methods":"GET, POST, PATCH, DELETE, PUT, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",Authorization:"Bearer "+localStorage.getItem("jwt")})}}return _createClass(e,[{key:"getSubjects",value:function(){return this.httpClient.get(this.apiURL+"/subjects/getallsubjects",this.httpOptions).pipe(Object(o.a)(this.errorHandler))}},{key:"getSubject",value:function(e){return this.httpClient.get(this.apiURL+"/subjects/getsubjectbuid/"+e,this.httpOptions)}},{key:"createSubject",value:function(e){return this.httpClient.post(this.apiURL+"/subjects/registersubject",JSON.stringify(e),this.httpOptions).pipe(Object(o.a)(this.errorHandler))}},{key:"updateSubject",value:function(e,t){return this.httpClient.patch(this.apiURL+"/subjects/updatesubject",JSON.stringify(t),this.httpOptions).pipe(Object(o.a)(this.errorHandler))}},{key:"deleteSubject",value:function(e){return this.httpClient.delete(this.apiURL+"/subjects/archive/"+e,this.httpOptions).pipe(Object(o.a)(this.errorHandler))}},{key:"errorHandler",value:function(e){var t="";return e.error instanceof ErrorEvent?(t=e.error.message,console.log("Client Side Error",t)):(t="Server Side Error Code: ".concat(e.status,"\n Message: ").concat(e.message),console.log(t)),Object(i.a)(console.log(t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Zb(r.a))},e.\u0275prov=s.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},Olgc:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("fXoL"),i=n("7zfz"),o=function(){var e=function(){function e(t){_classCallCheck(this,e),this.messageService=t}return _createClass(e,[{key:"addSingle",value:function(e,t,n){this.messageService.add({severity:e,summary:t,detail:n})}},{key:"addMultiple",value:function(e){this.messageService.addAll(e)}},{key:"clear",value:function(){this.messageService.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Zb(i.d))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},ST0Q:function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),i=n("tyNb"),o=n("7zfz"),a=n("J7/z"),s=n("AlMu"),c=n("Olgc"),u=n("7vv+"),l=n("5JmO"),p=n.n(l),b=n("TruH"),h=n.n(b),d=n("uIk+"),f=n("fXoL");p.a.vfs=h.a.pdfMake.vfs;var g,v=((g=function(){function e(t){_classCallCheck(this,e),this.canvas=t}return _createClass(e,[{key:"setTitle",value:function(e,t,n,r,i,o,a){var s;return[{table:{widths:["100%","0%"],body:[[{image:e,alignment:"center",width:60,height:30}],[{text:t,fontSize:s="A6"===a?8:10,alignment:"center",bold:!0}],[{text:n,fontSize:s,alignment:"center"}],[{text:r,fontSize:s,alignment:"center",italics:!0}],[{text:i,fontSize:s,alignment:"center",italics:!0}]]},layout:"noBorders"}]}},{key:"createTableHeader",value:function(e){var t={fila_0:{}};return e.forEach((function(e,n){t.fila_0["col_"+(+n+1)]={text:e,style:"tableHeader",margin:[0,8,0,0]}})),t}},{key:"createBody",value:function(e,t){var n=[];for(var r in e){var i=[];for(var o in e[r])i.push(e[r][o]);n.push(i)}return t.forEach((function(e){var t=[];for(var r in e)t.push(e[r]);n.push(t)})),n}},{key:"getDocDefinition",value:function(e,t,n,r,i,o,a,s,c,u){var l,p,b,h={header:{title:e,header1:t,header2:n,header3:r},body:{header:o,record:a}},d=this.createBody(this.createTableHeader(h.body.header),h.body.record);return"A6"===u?(l=[10,110,10,55],p=10,b=7):(p=16,b=10,l=[10,110,10,55]),{pageOrientation:s,pageSize:u,pageMargins:l,header:this.setTitle(i,e,t,n,r,h,u),footer:function(e,t){return{text:"Page "+e.toString()+" of "+t,alignment:"center",margin:[0,30,0,0]}},content:[{style:"tableContent",table:{widths:c,headerRows:1,body:d}}],styles:{header:{fontSize:p,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:b}}}}},{key:"generatePdf",value:function(e){p.a.createPdf(e).print()}},{key:"getPdfData",value:function(e){var t=this,n=["50%","50%"],r=["Name","Subject"],i="Date: ".concat((new Date).toLocaleString());this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then((function(o){t.generatePdf(t.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",i,o,r,t.mapData(e),"portrait",n,"A4"))}))}},{key:"mapData",value:function(e){return e.map((function(e){return{AdmNo:e.groupName,StudentName:e.subjectID}}))}}]),e}()).\u0275fac=function(e){return new(e||g)(f.Zb(d.a))},g.\u0275prov=f.Lb({token:g,factory:g.\u0275fac,providedIn:"root"}),g),m=n("WsT8"),S=n("fk4S"),C=n("rEr+"),j=n("3Pt+"),y=n("7kUa");function k(e,t){if(1&e&&(f.Vb(0,"th"),f.Ic(1),f.Ub()),2&e){var n=t.$implicit;f.Db(1),f.Kc(" ",n.header," ")}}function O(e,t){if(1&e&&(f.Vb(0,"tr",11),f.Gc(1,k,2,1,"th",12),f.Vb(2,"th"),f.Ic(3,"Action"),f.Ub(),f.Ub()),2&e){var n=f.gc();f.Db(1),f.nc("ngForOf",n.columns)}}function w(e,t){if(1&e&&(f.Vb(0,"td"),f.Vb(1,"div"),f.Ic(2),f.Ub(),f.Ub()),2&e){var n=t.$implicit,r=f.gc().$implicit;f.Db(2),f.Jc(r[n.field])}}var A=function(e){return["/main/subjectGroups/","subjectGroup-details",e]},U=function(e){return["/main/subjectGroups/","subjectGroup-edit",e]};function P(e,t){if(1&e){var n=f.Wb();f.Vb(0,"tr",11),f.Gc(1,w,3,1,"td",12),f.Vb(2,"td"),f.Vb(3,"div",13),f.Vb(4,"button",14),f.Ic(5,"View"),f.Ub(),f.Vb(6,"button",15),f.Ic(7,"Edit"),f.Ub(),f.Vb(8,"button",16),f.dc("click",(function(){f.zc(n);var e=t.$implicit;return f.gc().deleteSubjectGroup(e._id)})),f.Ic(9,"Delete"),f.Ub(),f.Ub(),f.Ub(),f.Ub()}if(2&e){var r=t.$implicit,i=f.gc();f.Db(1),f.nc("ngForOf",i.columns),f.Db(3),f.nc("routerLink",f.qc(3,A,r._id)),f.Db(2),f.nc("routerLink",f.qc(5,U,r._id))}}var I,R,G=function(){return[5,10,25,50,100]},L=[{path:"",component:(I=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this.dialogService=t,this.toastService=n,this.pdfService=r,this.applicationStateService=i,this.subjectGroupsService=o,this.subjectGroups=[],this.isMobileResolution=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"groupName",header:"Group Name"},{field:"subjectID.subjectName",header:"subject Name"},{field:"groupShortName",header:"Short Form"}],this.exportColumns=this.columns.map((function(e){return{title:e.header,dataKey:e.field}})),this.getSubjectGroups()}},{key:"getSubjectGroups",value:function(){var e=this;this.subjectGroupsService.getSubjectGroups().subscribe((function(t){e.subjectGroups=t.data,e.toastService.addSingle("success","data Loaded","")}),(function(t){e.toastService.addSingle("error","sorry, we could not find the data","contact the admin for assistance")}))}},{key:"openNew",value:function(){var e=this;this.dialogService.open(u.a,{data:{},width:this.isMobileResolution?"400px":"600px"}).onClose.subscribe((function(t){t&&e.toastService.addSingle("success","panel closed","")}))}},{key:"exportPdf",value:function(){this.pdfService.getPdfData(this.subjectGroups)}}]),e}(),I.\u0275fac=function(e){return new(e||I)(f.Pb(a.a),f.Pb(c.a),f.Pb(v),f.Pb(s.a),f.Pb(m.a))},I.\u0275cmp=f.Jb({type:I,selectors:[["app-list-subject-group"]],features:[f.Cb([a.a,o.d])],decls:15,vars:10,consts:[["legend","subjectGroups",3,"toggleable"],["pRipple","",1,"btn","btn-success","btn-sm","m-1",3,"click"],["pRipple","","type","button","icon","pi pi-file-excel","tooltipPosition","bottom",1,"btn","btn-info","btn-sm","mx-2",3,"click"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","resizableColumns","scrollable","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[1,"ui-g"],[1,"ui-g-10","ui-sm-8"],[2,"float","right"],[1,"ui-g-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],[1,"text-sm"],[4,"ngFor","ngForOf"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(e,t){1&e&&(f.Vb(0,"p-fieldset",0),f.Vb(1,"div"),f.Vb(2,"button",1),f.dc("click",(function(){return t.openNew()})),f.Ic(3,"Create subjectGroup"),f.Ub(),f.Vb(4,"button",2),f.dc("click",(function(){return t.exportPdf()})),f.Ic(5,"subjectGroup report"),f.Ub(),f.Ub(),f.Vb(6,"p-table",3),f.Gc(7,O,4,1,"ng-template",4),f.Gc(8,P,10,7,"ng-template",5),f.Ub(),f.Vb(9,"div",6),f.Vb(10,"div",7),f.Vb(11,"label",8),f.Ic(12,"Page Size:"),f.Ub(),f.Ub(),f.Vb(13,"div",9),f.Vb(14,"input",10),f.dc("ngModelChange",(function(e){return t.pageSize=e})),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&e&&(f.nc("toggleable",!0),f.Db(6),f.nc("value",t.subjectGroups)("paginator",!0)("resizableColumns",!0)("scrollable",!0)("rows",t.pageSize)("showCurrentPageReport",!0)("rowsPerPageOptions",f.pc(9,G)),f.Db(8),f.nc("ngModel",t.pageSize))},directives:[S.a,C.c,o.e,j.b,y.a,j.k,j.n,r.j,i.d],styles:[""]}),I)}],T=((R=function e(){_classCallCheck(this,e)}).\u0275mod=f.Nb({type:R}),R.\u0275inj=f.Mb({factory:function(e){return new(e||R)},imports:[[i.g.forChild(L)],i.g]}),R),z=n("EQGD"),D=n("K0h9");n.d(t,"ListSubjectGroupModule",(function(){return N}));var E,N=((E=function e(){_classCallCheck(this,e)}).\u0275mod=f.Nb({type:E}),E.\u0275inj=f.Mb({factory:function(e){return new(e||E)},imports:[[r.b,T,D.a,z.a]]}),E)},WsT8:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("tk/3"),i=n("z6cu"),o=n("JIr8"),a=n("AytR"),s=n("fXoL"),c=function(){var e=function(){function e(t){_classCallCheck(this,e),this.httpClient=t,this.apiURL=a.a.apiUrl,this.httpOptions={headers:new r.c({"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Origin":"*","Cross-Origin":"true","Access-Control-Allow-Methods":"GET, POST, PATCH, DELETE, PUT, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",Authorization:"Bearer "+localStorage.getItem("jwt")})}}return _createClass(e,[{key:"getSubjectGroups",value:function(){return this.httpClient.get("".concat(this.apiURL,"/subjects/getallsubjectgroup"),this.httpOptions).pipe(Object(o.a)(this.errorHandler))}},{key:"getSubjectGroup",value:function(e){return this.httpClient.get("".concat(this.apiURL,"/subjects/getsubjectgroupbyid/").concat(e),this.httpOptions).pipe(Object(o.a)(this.errorHandler))}},{key:"createSubjectGroup",value:function(e){return this.httpClient.post(this.apiURL+"/subjects/registergroup",JSON.stringify(e),this.httpOptions).pipe(Object(o.a)(this.errorHandler))}},{key:"updateSubjectGroup",value:function(e,t){return this.httpClient.patch("".concat(this.apiURL,"/subjects/updatesubjectgroup"),JSON.stringify(t),this.httpOptions).pipe(Object(o.a)(this.errorHandler))}},{key:"deleteSubjectGroup",value:function(e){return this.httpClient.delete("".concat(this.apiURL,"/subjects/archive"),this.httpOptions).pipe(Object(o.a)(this.errorHandler))}},{key:"errorHandler",value:function(e){var t="";return e.error instanceof ErrorEvent?(t=e.error.message,console.log("Client Side Error",t)):(t="Server Side Error Code: ".concat(e.status,"\n Message: ").concat(e.message),console.log(t)),Object(i.a)(console.log(t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Zb(r.a))},e.\u0275prov=s.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);