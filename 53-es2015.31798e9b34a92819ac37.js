(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{Olgc:function(t,e,o){"use strict";o.d(e,"a",(function(){return c}));var i=o("fXoL"),n=o("7zfz");let c=(()=>{class t{constructor(t){this.messageService=t}addSingle(t,e,o){this.messageService.add({severity:t,summary:e,detail:o})}addMultiple(t){this.messageService.addAll(t)}clear(){this.messageService.clear()}}return t.\u0275fac=function(e){return new(e||t)(i.Zb(n.d))},t.\u0275prov=i.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},v8D2:function(t,e,o){"use strict";o.r(e);var i=o("ofXK"),n=o("tyNb"),c=o("7zfz"),a=o("J7/z"),r=o("AlMu"),s=o("Olgc"),l=o("5JmO"),d=o.n(l),b=o("TruH"),p=o.n(b),u=o("uIk+"),h=o("fXoL");d.a.vfs=p.a.pdfMake.vfs;let f=(()=>{class t{constructor(t){this.canvas=t}setTitle(t,e,o,i,n,c,a){let r,s;return"A6"===a?(r=[15,10,0,10],s=8):(r=[15,10,0,10],s=10),[{table:{widths:["100%","0%"],body:[[{image:t,alignment:"center",width:60,height:30}],[{text:e,fontSize:s,alignment:"center",bold:!0}],[{text:o,fontSize:s,alignment:"center"}],[{text:i,fontSize:s,alignment:"center",italics:!0}],[{text:n,fontSize:s,alignment:"center",italics:!0}]]},layout:"noBorders"}]}createTableHeader(t){const e={fila_0:{}};return t.forEach((t,o)=>{e.fila_0["col_"+(+o+1)]={text:t,style:"tableHeader",margin:[0,8,0,0]}}),e}createBody(t,e){const o=[];for(const i in t){const e=[];for(const o in t[i])e.push(t[i][o]);o.push(e)}return e.forEach(t=>{const e=[];for(const o in t)e.push(t[o]);o.push(e)}),o}getDocDefinition(t,e,o,i,n,c,a,r,s,l){const d={header:{title:t,header1:e,header2:o,header3:i},body:{header:c,record:a}},b=this.createBody(this.createTableHeader(d.body.header),d.body.record);let p,u,h;return"A6"===l?(p=[10,110,10,55],u=10,h=7):(u=16,h=10,p=[10,110,10,55]),{pageOrientation:r,pageSize:l,pageMargins:p,header:this.setTitle(n,t,e,o,i,d,l),footer:(t,e)=>({text:"Page "+t.toString()+" of "+e,alignment:"center",margin:[0,30,0,0]}),content:[{style:"tableContent",table:{widths:s,headerRows:1,body:b}}],styles:{header:{fontSize:u,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:h}}}}generatePdf(t){d.a.createPdf(t).print()}getPdfData(t){const e=["20%","35%","25%","20%"],o=["School Code","School Name","School Motto","Principal"],i=`Date: ${(new Date).toLocaleString()}`;this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then(n=>{this.generatePdf(this.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",i,n,o,this.mapData(t),"portrait",e,"A4"))})}mapData(t){return t.map(t=>({AdmNo:t.schoolCode,StudentName:t.schoolName,Gender:t.schoolMotto,pidNumber:t.schoolPrincipal}))}}return t.\u0275fac=function(e){return new(e||t)(h.Zb(u.a))},t.\u0275prov=h.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=o("wsLY"),m=o("Y5oR"),S=o("fk4S"),v=o("rEr+"),y=o("3Pt+"),w=o("7kUa");function P(t,e){if(1&t){const t=h.Wb();h.Vb(0,"div",14),h.Qb(1,"i",15),h.Vb(2,"input",16),h.dc("input",(function(e){return h.zc(t),h.gc().dt1.filterGlobal(e.target.field,"contains")})),h.Ub(),h.Ub()}}function V(t,e){if(1&t){const t=h.Wb();h.Vb(0,"div",17),h.Qb(1,"i",15),h.Vb(2,"input",18),h.dc("input",(function(e){return h.zc(t),h.gc(),h.yc(8).filterGlobal(e.target.value,"contains")})),h.Ub(),h.Ub()}}function U(t,e){if(1&t&&(h.Vb(0,"th",21),h.Ic(1),h.Qb(2,"p-sortIcon",22),h.Ub()),2&t){const t=e.$implicit;h.nc("pSortableColumn",t.field),h.Db(1),h.Kc(" ",t.header," "),h.Db(1),h.nc("field",t.field)}}function x(t,e){if(1&t&&(h.Vb(0,"tr",19),h.Gc(1,U,3,3,"th",20),h.Vb(2,"th"),h.Ic(3,"Action"),h.Ub(),h.Ub()),2&t){const t=h.gc();h.Db(1),h.nc("ngForOf",t.columns)}}function I(t,e){if(1&t&&(h.Vb(0,"td"),h.Vb(1,"div"),h.Ic(2),h.Ub(),h.Ub()),2&t){const t=e.$implicit,o=h.gc().$implicit;h.Db(2),h.Jc(o[t.field])}}const z=function(t){return["/main/schools/","school-details",t]},C=function(t){return["/main/schools/","school-edit",t]};function D(t,e){if(1&t&&(h.Vb(0,"tr",19),h.Gc(1,I,3,1,"td",23),h.Vb(2,"td"),h.Vb(3,"div",24),h.Vb(4,"button",25),h.Ic(5,"View"),h.Ub(),h.Vb(6,"button",26),h.Ic(7,"Edit"),h.Ub(),h.Ub(),h.Ub(),h.Ub()),2&t){const t=e.$implicit,o=h.gc();h.Db(1),h.nc("ngForOf",o.columns),h.Db(3),h.nc("routerLink",h.qc(3,z,t._id)),h.Db(2),h.nc("routerLink",h.qc(5,C,t._id))}}function M(t,e){1&t&&(h.Vb(0,"tr"),h.Vb(1,"td",27),h.Ic(2,"No data found."),h.Ub(),h.Ub())}const O=function(){return[10,25,50,100]},N=[{path:"",component:(()=>{class t{constructor(t,e,o,i,n){this.dialogService=t,this.toastService=e,this.pdfService=o,this.applicationStateService=i,this.schoolService=n,this.schools=[],this.isMobileResolution=!1}ngOnInit(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"schoolName",header:"school Name"},{field:"schoolCode",header:"school Code"},{field:"schoolMotto",header:"school Motto"},{field:"schoolPrincipal",header:"school Principal"}],this.exportColumns=this.columns.map(t=>({title:t.header,dataKey:t.field})),this.getSchools()}getSchools(){this.schoolService.getSchools().subscribe(t=>{this.schools=t.data,this.toastService.addSingle("success","schools Loaded","")},t=>{this.toastService.addSingle("error","sorry, we could not find the data","contact the admin for assistance")})}openNew(){this.dialogService.open(m.a,{data:{},width:this.isMobileResolution?"400px":"600px"}).onClose.subscribe(t=>{t&&this.toastService.addSingle("success","panel closed","")})}exportPdf(){this.pdfService.getPdfData(this.schools)}}return t.\u0275fac=function(e){return new(e||t)(h.Pb(a.a),h.Pb(s.a),h.Pb(f),h.Pb(r.a),h.Pb(g.a))},t.\u0275cmp=h.Jb({type:t,selectors:[["app-school-list"]],features:[h.Cb([a.a,c.d])],decls:19,vars:10,consts:[["legend","Schools",3,"toggleable"],["pRipple","",1,"btn","btn-success","btn-sm","m-1",3,"click"],["type","button","pRipple","","icon","pi pi-filter","pTooltip","Selection Only","tooltipPosition","bottom",1,"btn","btn-success","btn-sm",3,"click"],["pTemplate","caption"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"columns","value","paginator","resizableColumns","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"ui-g"],[1,"ui-g-10","ui-sm-8"],[2,"float","right"],[1,"ui-g-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],["colspan","2",2,"text-align","right"],[1,"pi","pi-search",2,"margin","4px 4px 0 0"],["type","text","pInputText","","size","50","placeholder","Global Filter",2,"width","auto",3,"input"],[2,"text-align","right"],["type","text","pInputText","","size","20","placeholder","Global Filter",2,"width","auto",3,"input"],[1,"text-sm"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[4,"ngFor","ngForOf"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-sm",2,"margin-right","16px",3,"routerLink"],["colspan","5"]],template:function(t,e){if(1&t){const t=h.Wb();h.Vb(0,"p-fieldset",0),h.Vb(1,"div"),h.Vb(2,"button",1),h.dc("click",(function(){return e.openNew()})),h.Ic(3,"Create New school"),h.Ub(),h.Vb(4,"button",2),h.dc("click",(function(){return h.zc(t),h.yc(8).exportCSV({selectionOnly:!0})})),h.Ic(5,"Print Filtered"),h.Ub(),h.Ub(),h.Gc(6,P,3,0,"ng-template",3),h.Vb(7,"p-table",4,5),h.Gc(9,V,3,0,"ng-template",3),h.Gc(10,x,4,1,"ng-template",6),h.Gc(11,D,8,7,"ng-template",7),h.Gc(12,M,3,0,"ng-template",8),h.Ub(),h.Vb(13,"div",9),h.Vb(14,"div",10),h.Vb(15,"label",11),h.Ic(16,"Page Size:"),h.Ub(),h.Ub(),h.Vb(17,"div",12),h.Vb(18,"input",13),h.dc("ngModelChange",(function(t){return e.pageSize=t})),h.Ub(),h.Ub(),h.Ub(),h.Ub()}2&t&&(h.nc("toggleable",!0),h.Db(7),h.nc("columns",e.columns)("value",e.schools)("paginator",!0)("resizableColumns",!0)("rows",e.pageSize)("showCurrentPageReport",!0)("rowsPerPageOptions",h.pc(9,O)),h.Db(11),h.nc("ngModel",e.pageSize))},directives:[S.a,c.e,v.c,y.b,w.a,y.k,y.n,i.j,v.b,v.a,n.d],styles:[""]}),t})()}];let k=(()=>{class t{}return t.\u0275mod=h.Nb({type:t}),t.\u0275inj=h.Mb({factory:function(e){return new(e||t)},imports:[[n.g.forChild(N)],n.g]}),t})();var R=o("EQGD"),T=o("K0h9");o.d(e,"SchoolListModule",(function(){return L}));let L=(()=>{class t{}return t.\u0275mod=h.Nb({type:t}),t.\u0275inj=h.Mb({factory:function(e){return new(e||t)},imports:[[i.b,k,T.a,R.a]]}),t})()}}]);