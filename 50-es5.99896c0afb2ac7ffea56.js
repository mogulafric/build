function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{KLHr:function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),a=n("tyNb"),r=n("J7/z"),o=n("AlMu"),c=n("Olgc"),s=n("Jvyb"),l=n("bojg"),u=n("5JmO"),b=n.n(u),d=n("TruH"),f=n.n(d),p=n("uIk+"),g=n("fXoL");b.a.vfs=f.a.pdfMake.vfs;var h,v=((h=function(){function e(t){_classCallCheck(this,e),this.canvas=t}return _createClass(e,[{key:"setTitle",value:function(e,t,n,i,a,r,o){var c;return[{table:{widths:["100%","0%"],body:[[{image:e,alignment:"center",width:60,height:30}],[{text:t,fontSize:c="A6"===o?8:10,alignment:"center",bold:!0}],[{text:n,fontSize:c,alignment:"center"}],[{text:i,fontSize:c,alignment:"center",italics:!0}],[{text:a,fontSize:c,alignment:"center",italics:!0}]]},layout:"noBorders"}]}},{key:"createTableHeader",value:function(e){var t={fila_0:{}};return e.forEach((function(e,n){t.fila_0["col_"+(+n+1)]={text:e,style:"tableHeader",margin:[0,8,0,0]}})),t}},{key:"createBody",value:function(e,t){var n=[];for(var i in e){var a=[];for(var r in e[i])a.push(e[i][r]);n.push(a)}return t.forEach((function(e){var t=[];for(var i in e)t.push(e[i]);n.push(t)})),n}},{key:"getDocDefinition",value:function(e,t,n,i,a,r,o,c,s,l){var u,b,d,f={header:{title:e,header1:t,header2:n,header3:i},body:{header:r,record:o}},p=this.createBody(this.createTableHeader(f.body.header),f.body.record);return"A6"===l?(u=[10,110,10,55],b=10,d=7):(b=16,d=10,u=[10,110,10,55]),{pageOrientation:c,pageSize:l,pageMargins:u,header:this.setTitle(a,e,t,n,i,f,l),footer:function(e,t){return{text:"Page "+e.toString()+" of "+t,alignment:"center",margin:[0,30,0,0]}},content:[{style:"tableContent",table:{widths:s,headerRows:1,body:p}}],styles:{header:{fontSize:b,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:d}}}}},{key:"generatePdf",value:function(e){b.a.createPdf(e).print()}},{key:"getPdfData",value:function(e){var t=this,n=["32%","32%","36%"],i=["Parent/Guardian","Parent/Guardian","Student"],a="Date: ".concat((new Date).toLocaleString());this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then((function(r){t.generatePdf(t.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",a,r,i,t.mapData(e),"portrait",n,"A4"))}))}},{key:"mapData",value:function(e){return e.map((function(e){return{Name:e.firstParent,Name2:e.secondParent,Code:e.studentID}}))}}]),e}()).\u0275fac=function(e){return new(e||h)(g.Zb(p.a))},h.\u0275prov=g.Lb({token:h,factory:h.\u0275fac,providedIn:"root"}),h),m=n("fk4S"),S=n("rEr+"),y=n("7zfz"),P=n("3Pt+"),k=n("7kUa");function C(e,t){if(1&e&&(g.Vb(0,"th"),g.Ic(1),g.Ub()),2&e){var n=t.$implicit;g.Db(1),g.Kc(" ",n.header," ")}}function w(e,t){if(1&e&&(g.Vb(0,"tr",11),g.Gc(1,C,2,1,"th",12),g.Vb(2,"th"),g.Ic(3,"Student"),g.Ub(),g.Vb(4,"th"),g.Ic(5,"Action"),g.Ub(),g.Ub()),2&e){var n=g.gc();g.Db(1),g.nc("ngForOf",n.columns)}}function I(e,t){if(1&e&&(g.Vb(0,"td"),g.Vb(1,"div"),g.Ic(2),g.Ub(),g.Ub()),2&e){var n=t.$implicit,i=g.gc().$implicit;g.Db(2),g.Jc(i[n.field])}}var D=function(e){return["/main/parents/","parent-details",e]},U=function(e){return["/main/parents/","parent-edit",e]};function V(e,t){if(1&e){var n=g.Wb();g.Vb(0,"tr",11),g.Gc(1,I,3,1,"td",12),g.Vb(2,"td"),g.Ic(3),g.Ub(),g.Vb(4,"td"),g.Vb(5,"div",13),g.Vb(6,"button",14),g.Ic(7,"View"),g.Ub(),g.Vb(8,"button",15),g.Ic(9,"Edit"),g.Ub(),g.Vb(10,"button",16),g.dc("click",(function(){g.zc(n);var e=t.$implicit;return g.gc().deleteParent(e._id)})),g.Ic(11,"Delete"),g.Ub(),g.Ub(),g.Ub(),g.Ub()}if(2&e){var i=t.$implicit,a=g.gc();g.Db(1),g.nc("ngForOf",a.columns),g.Db(2),g.Jc(null==i.studentID?null:i.studentID.studentName),g.Db(3),g.nc("routerLink",g.qc(4,D,i._id)),g.Db(2),g.nc("routerLink",g.qc(6,U,i._id))}}var z,_,x=function(){return[5,10,25,50,100]},O=[{path:"",component:(z=function(){function e(t,n,i,a,r){_classCallCheck(this,e),this.dialogService=t,this.toastService=n,this.applicationStateService=i,this.parentsService=a,this.pdfService=r,this.parents=[],this.isMobileResolution=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"firstParent",header:"Parent/Guardian"},{field:"secondParent",header:"Parent/Guardian"}],this.getparents()}},{key:"getparents",value:function(){var e=this;this.parentsService.getParents().subscribe((function(t){e.parents=t.data,e.toastService.addSingle("success","Parents Loaded","")}),(function(t){e.toastService.addSingle("error","sorry, we could not find the data","contact the admin for assitance")}))}},{key:"openNew",value:function(){var e=this;this.dialogService.open(s.a,{data:{},width:this.isMobileResolution?"400px":"600px"}).onClose.subscribe((function(t){t&&e.toastService.addSingle("success","panel closed","")}))}},{key:"exportPdf",value:function(){this.pdfService.getPdfData(this.parents)}}]),e}(),z.\u0275fac=function(e){return new(e||z)(g.Pb(r.a),g.Pb(c.a),g.Pb(o.a),g.Pb(l.a),g.Pb(v))},z.\u0275cmp=g.Jb({type:z,selectors:[["app-parent-list"]],features:[g.Cb([r.a])],decls:15,vars:10,consts:[["legend","Parents",3,"toggleable"],["pRipple","",1,"btn","btn-success","btn-sm","m-1",3,"click"],["pRipple","","type","button","icon","pi pi-file-excel","tooltipPosition","bottom",1,"btn","btn-info","btn-sm","mx-2",3,"click"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","resizableColumns","scrollable","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[1,"ui-g"],[1,"ui-g-10","ui-sm-8"],[2,"float","right"],[1,"ui-g-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],[1,"text-sm"],[4,"ngFor","ngForOf"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(e,t){1&e&&(g.Vb(0,"p-fieldset",0),g.Vb(1,"div"),g.Vb(2,"button",1),g.dc("click",(function(){return t.openNew()})),g.Ic(3,"Create Parent"),g.Ub(),g.Vb(4,"button",2),g.dc("click",(function(){return t.exportPdf()})),g.Ic(5,"Parent report"),g.Ub(),g.Ub(),g.Vb(6,"p-table",3),g.Gc(7,w,6,1,"ng-template",4),g.Gc(8,V,12,8,"ng-template",5),g.Ub(),g.Vb(9,"div",6),g.Vb(10,"div",7),g.Vb(11,"label",8),g.Ic(12,"Page Size:"),g.Ub(),g.Ub(),g.Vb(13,"div",9),g.Vb(14,"input",10),g.dc("ngModelChange",(function(e){return t.pageSize=e})),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&e&&(g.nc("toggleable",!0),g.Db(6),g.nc("value",t.parents)("paginator",!0)("resizableColumns",!0)("scrollable",!0)("rows",t.pageSize)("showCurrentPageReport",!0)("rowsPerPageOptions",g.pc(9,x)),g.Db(8),g.nc("ngModel",t.pageSize))},directives:[m.a,S.c,y.e,P.b,k.a,P.k,P.n,i.j,a.d],styles:[""]}),z)}],R=((_=function e(){_classCallCheck(this,e)}).\u0275mod=g.Nb({type:_}),_.\u0275inj=g.Mb({factory:function(e){return new(e||_)},imports:[[a.g.forChild(O)],a.g]}),_),M=n("EQGD"),L=n("K0h9");n.d(t,"ParentListModule",(function(){return T}));var N,T=((N=function e(){_classCallCheck(this,e)}).\u0275mod=g.Nb({type:N}),N.\u0275inj=g.Mb({factory:function(e){return new(e||N)},imports:[[i.b,R,L.a,M.a]]}),N)},Olgc:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),a=n("7zfz"),r=function(){var e=function(){function e(t){_classCallCheck(this,e),this.messageService=t}return _createClass(e,[{key:"addSingle",value:function(e,t,n){this.messageService.add({severity:e,summary:t,detail:n})}},{key:"addMultiple",value:function(e){this.messageService.addAll(e)}},{key:"clear",value:function(){this.messageService.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Zb(a.d))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);