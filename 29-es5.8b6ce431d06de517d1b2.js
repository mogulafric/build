function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{Olgc:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("fXoL"),i=n("7zfz"),r=function(){var e=function(){function e(t){_classCallCheck(this,e),this.messageService=t}return _createClass(e,[{key:"addSingle",value:function(e,t,n){this.messageService.add({severity:e,summary:t,detail:n})}},{key:"addMultiple",value:function(e){this.messageService.addAll(e)}},{key:"clear",value:function(){this.messageService.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Zb(i.d))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},jPF5:function(e,t,n){"use strict";n.r(t);var a=n("ofXK"),i=n("tyNb"),r=n("J7/z"),s=n("AlMu"),o=n("Olgc"),c=n("e0Eu"),l=n("tvG+"),u=n("5JmO"),h=n.n(u),p=n("TruH"),d=n.n(p),f=n("uIk+"),b=n("fXoL");h.a.vfs=d.a.pdfMake.vfs;var g,v=((g=function(){function e(t){_classCallCheck(this,e),this.canvas=t}return _createClass(e,[{key:"setTitle",value:function(e,t,n,a,i,r,s){var o;return[{table:{widths:["100%","0%"],body:[[{image:e,alignment:"center",width:60,height:30}],[{text:t,fontSize:o="A6"===s?8:10,alignment:"center",bold:!0}],[{text:n,fontSize:o,alignment:"center"}],[{text:a,fontSize:o,alignment:"center",italics:!0}],[{text:i,fontSize:o,alignment:"center",italics:!0}]]},layout:"noBorders"}]}},{key:"createTableHeader",value:function(e){var t={fila_0:{}};return e.forEach((function(e,n){t.fila_0["col_"+(+n+1)]={text:e,style:"tableHeader",margin:[0,8,0,0]}})),t}},{key:"createBody",value:function(e,t){var n=[];for(var a in e){var i=[];for(var r in e[a])i.push(e[a][r]);n.push(i)}return t.forEach((function(e){var t=[];for(var a in e)t.push(e[a]);n.push(t)})),n}},{key:"getDocDefinition",value:function(e,t,n,a,i,r,s,o,c,l){var u,h,p,d={header:{title:e,header1:t,header2:n,header3:a},body:{header:r,record:s}},f=this.createBody(this.createTableHeader(d.body.header),d.body.record);return"A6"===l?(u=[10,110,10,55],h=10,p=7):(h=16,p=10,u=[10,110,10,55]),{pageOrientation:o,pageSize:l,pageMargins:u,header:this.setTitle(i,e,t,n,a,d,l),footer:function(e,t){return{text:"Page "+e.toString()+" of "+t,alignment:"center",margin:[0,30,0,0]}},content:[{style:"tableContent",table:{widths:c,headerRows:1,body:f}}],styles:{header:{fontSize:h,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:p}}}}},{key:"generatePdf",value:function(e){h.a.createPdf(e).print()}},{key:"getPdfData",value:function(e){var t=this,n=["50%","50%"],a=["Class","Teacher"],i="Date: ".concat((new Date).toLocaleString());this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then((function(r){t.generatePdf(t.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",i,r,a,t.mapData(e),"portrait",n,"A4"))}))}},{key:"mapData",value:function(e){return e.map((function(e){return{class:e.classID,teacher:e.teacherID}}))}}]),e}()).\u0275fac=function(e){return new(e||g)(b.Zb(f.a))},g.\u0275prov=b.Lb({token:g,factory:g.\u0275fac,providedIn:"root"}),g),m=n("fk4S"),C=n("rEr+"),y=n("7zfz"),S=n("3Pt+"),k=n("7kUa");function w(e,t){1&e&&(b.Vb(0,"tr",12),b.Vb(1,"th"),b.Ic(2,"Class"),b.Ub(),b.Vb(3,"th"),b.Ic(4,"Teacher Name"),b.Ub(),b.Vb(5,"th"),b.Ic(6,"Action"),b.Ub(),b.Ub())}var T=function(e){return["/main/classTeacher/","classTeacher-details",e]},I=function(e){return["/main/classTeacher/","classTeacher-edit",e]};function O(e,t){if(1&e&&(b.Vb(0,"tr",12),b.Vb(1,"td"),b.Ic(2),b.Ub(),b.Vb(3,"td"),b.Ic(4),b.Ub(),b.Vb(5,"td"),b.Vb(6,"div",13),b.Vb(7,"button",14),b.Ic(8,"View"),b.Ub(),b.Vb(9,"button",15),b.Ic(10,"Edit"),b.Ub(),b.Ub(),b.Ub(),b.Ub()),2&e){var n=t.$implicit;b.Db(2),b.Jc(null==n.classID?null:n.classID.unitName),b.Db(2),b.Kc(" ",null==n.teacherID?null:n.teacherID.teacherName," "),b.Db(3),b.nc("routerLink",b.qc(4,T,n._id)),b.Db(2),b.nc("routerLink",b.qc(6,I,n._id))}}function P(e,t){1&e&&(b.Vb(0,"tr"),b.Vb(1,"td"),b.Ic(2,"No data found."),b.Ub(),b.Ub())}var U,D,A=function(){return[5,10,25,50,100]},V=[{path:"",component:(U=function(){function e(t,n,a,i,r){_classCallCheck(this,e),this.dialogService=t,this.toastService=n,this.applicationStateService=a,this.teachersService=i,this.pdfService=r,this.classTeacher=[],this.isMobileResolution=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"classID",header:"Class"},{field:"teacherID",header:"Teacher Name"}],this.getClassTeachers()}},{key:"getClassTeachers",value:function(){var e=this;this.teachersService.getClassTeachers().subscribe((function(t){e.classTeacher=t.data,e.toastService.addSingle("success","data Loaded","")}),(function(t){e.toastService.addSingle("error","sorry, we could not find the data","contact the admin for assitance")}))}},{key:"openNew",value:function(){var e=this;this.dialogService.open(l.a,{data:{},width:this.isMobileResolution?"400px":"600px"}).onClose.subscribe((function(t){t&&e.toastService.addSingle("success","panel closed","")}))}},{key:"exportPdf",value:function(){this.pdfService.getPdfData(this.classTeacher)}}]),e}(),U.\u0275fac=function(e){return new(e||U)(b.Pb(r.a),b.Pb(o.a),b.Pb(s.a),b.Pb(c.a),b.Pb(v))},U.\u0275cmp=b.Jb({type:U,selectors:[["app-class-teacher-list"]],features:[b.Cb([r.a])],decls:16,vars:10,consts:[["legend","classTeacher",3,"toggleable"],["pRipple","",1,"btn","btn-success","btn-sm","m-1",3,"click"],["pRipple","","type","button","icon","pi pi-file-excel","tooltipPosition","bottom",1,"btn","btn-info","btn-sm","mx-2",3,"click"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","resizableColumns","scrollable","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"ui-g"],[1,"ui-g-10","ui-sm-8"],[2,"float","right"],[1,"ui-g-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],[1,"text-sm"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-sm",2,"margin-right","16px",3,"routerLink"]],template:function(e,t){1&e&&(b.Vb(0,"p-fieldset",0),b.Vb(1,"div"),b.Vb(2,"button",1),b.dc("click",(function(){return t.openNew()})),b.Ic(3,"Create ClassTeacher"),b.Ub(),b.Vb(4,"button",2),b.dc("click",(function(){return t.exportPdf()})),b.Ic(5,"classTeacher report"),b.Ub(),b.Ub(),b.Vb(6,"p-table",3),b.Gc(7,w,7,0,"ng-template",4),b.Gc(8,O,11,8,"ng-template",5),b.Gc(9,P,3,0,"ng-template",6),b.Ub(),b.Vb(10,"div",7),b.Vb(11,"div",8),b.Vb(12,"label",9),b.Ic(13,"Page Size:"),b.Ub(),b.Ub(),b.Vb(14,"div",10),b.Vb(15,"input",11),b.dc("ngModelChange",(function(e){return t.pageSize=e})),b.Ub(),b.Ub(),b.Ub(),b.Ub()),2&e&&(b.nc("toggleable",!0),b.Db(6),b.nc("value",t.classTeacher)("paginator",!0)("resizableColumns",!0)("scrollable",!0)("rows",t.pageSize)("showCurrentPageReport",!0)("rowsPerPageOptions",b.pc(9,A)),b.Db(9),b.nc("ngModel",t.pageSize))},directives:[m.a,C.c,y.e,S.b,k.a,S.k,S.n,i.d],styles:[""]}),U)}],R=((D=function e(){_classCallCheck(this,e)}).\u0275mod=b.Nb({type:D}),D.\u0275inj=b.Mb({factory:function(e){return new(e||D)},imports:[[i.g.forChild(V)],i.g]}),D),z=n("EQGD"),L=n("K0h9");n.d(t,"ClassTeacherListModule",(function(){return x}));var _,x=((_=function e(){_classCallCheck(this,e)}).\u0275mod=b.Nb({type:_}),_.\u0275inj=b.Mb({factory:function(e){return new(e||_)},imports:[[a.b,R,L.a,z.a]]}),_)},xHgC:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("tk/3"),i=n("z6cu"),r=n("JIr8"),s=n("AytR"),o=n("fXoL"),c=function(){var e=function(){function e(t){_classCallCheck(this,e),this.httpClient=t,this.apiURL=s.a.apiUrl,this.httpOptions={headers:new a.c({"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Origin":"*","Cross-Origin":"true","Access-Control-Allow-Methods":"GET, POST, PATCH, DELETE, PUT, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",Authorization:"Bearer "+localStorage.getItem("jwt")})}}return _createClass(e,[{key:"getClasses",value:function(){return this.httpClient.get(this.apiURL+"/units/getallunits",this.httpOptions).pipe(Object(r.a)(this.errorHandler))}},{key:"getClass",value:function(e){return this.httpClient.get("".concat(this.apiURL,"/units/getunit/").concat(e),this.httpOptions).pipe(Object(r.a)(this.errorHandler))}},{key:"createClass",value:function(e){return this.httpClient.post("".concat(this.apiURL,"/units/registerunit"),JSON.stringify(e),this.httpOptions).pipe(Object(r.a)(this.errorHandler))}},{key:"updateClass",value:function(e,t){return this.httpClient.patch("".concat(this.apiURL,"/units/updateunit"),JSON.stringify(t),this.httpOptions).pipe(Object(r.a)(this.errorHandler))}},{key:"deleteClass",value:function(e){return this.httpClient.delete("".concat(this.apiURL,"/units/archive/").concat(e),this.httpOptions).pipe(Object(r.a)(this.errorHandler))}},{key:"errorHandler",value:function(e){var t="";return e.error instanceof ErrorEvent?(t=e.error.message,console.log("Client Side Error",t)):(t="Server Side Error Code: ".concat(e.status,"\n Message: ").concat(e.message),console.log(t)),Object(i.a)(console.log(t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Zb(a.a))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);