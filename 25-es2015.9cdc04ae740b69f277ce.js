(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"4hmF":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("tk/3"),r=i("z6cu"),s=i("JIr8"),o=i("AytR"),c=i("fXoL");let a=(()=>{class t{constructor(t){this.httpClient=t,this.apiURL=o.a.apiUrl,this.httpOptions={headers:new n.c({"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Origin":"*","Cross-Origin":"true","Access-Control-Allow-Methods":"GET, POST, PATCH, DELETE, PUT, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",Authorization:"Bearer "+localStorage.getItem("jwt")})}}getSubjects(){return this.httpClient.get(this.apiURL+"/subjects/getallsubjects",this.httpOptions).pipe(Object(s.a)(this.errorHandler))}getSubject(t){return this.httpClient.get(this.apiURL+"/subjects/getsubjectbuid/"+t,this.httpOptions)}createSubject(t){return this.httpClient.post(this.apiURL+"/subjects/registersubject",JSON.stringify(t),this.httpOptions).pipe(Object(s.a)(this.errorHandler))}updateSubject(t,e){return this.httpClient.patch(this.apiURL+"/subjects/updatesubject",JSON.stringify(e),this.httpOptions).pipe(Object(s.a)(this.errorHandler))}deleteSubject(t){return this.httpClient.delete(this.apiURL+"/subjects/archive/"+t,this.httpOptions).pipe(Object(s.a)(this.errorHandler))}errorHandler(t){let e="";return t.error instanceof ErrorEvent?(e=t.error.message,console.log("Client Side Error",e)):(e=`Server Side Error Code: ${t.status}\n Message: ${t.message}`,console.log(e)),Object(r.a)(console.log(e))}}return t.\u0275fac=function(e){return new(e||t)(c.Zb(n.a))},t.\u0275prov=c.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},CjqW:function(t,e,i){"use strict";i.r(e);var n=i("ofXK"),r=i("tyNb"),s=i("J7/z"),o=i("AlMu"),c=i("Olgc"),a=i("5JmO"),l=i.n(a),b=i("TruH"),u=i.n(b),p=i("uIk+"),d=i("fXoL");l.a.vfs=u.a.pdfMake.vfs;let h=(()=>{class t{constructor(t){this.canvas=t}setTitle(t,e,i,n,r,s,o){let c,a;return"A6"===o?(c=[15,10,0,10],a=8):(c=[15,10,0,10],a=10),[{table:{widths:["100%","0%"],body:[[{image:t,alignment:"center",width:60,height:30}],[{text:e,fontSize:a,alignment:"center",bold:!0}],[{text:i,fontSize:a,alignment:"center"}],[{text:n,fontSize:a,alignment:"center",italics:!0}],[{text:r,fontSize:a,alignment:"center",italics:!0}]]},layout:"noBorders"}]}createTableHeader(t){const e={fila_0:{}};return t.forEach((t,i)=>{e.fila_0["col_"+(+i+1)]={text:t,style:"tableHeader",margin:[0,8,0,0]}}),e}createBody(t,e){const i=[];for(const n in t){const e=[];for(const i in t[n])e.push(t[n][i]);i.push(e)}return e.forEach(t=>{const e=[];for(const i in t)e.push(t[i]);i.push(e)}),i}getDocDefinition(t,e,i,n,r,s,o,c,a,l){const b={header:{title:t,header1:e,header2:i,header3:n},body:{header:s,record:o}},u=this.createBody(this.createTableHeader(b.body.header),b.body.record);let p,d,h;return"A6"===l?(p=[10,110,10,55],d=10,h=7):(d=16,h=10,p=[10,110,10,55]),{pageOrientation:c,pageSize:l,pageMargins:p,header:this.setTitle(r,t,e,i,n,b,l),footer:(t,e)=>({text:"Page "+t.toString()+" of "+e,alignment:"center",margin:[0,30,0,0]}),content:[{style:"tableContent",table:{widths:a,headerRows:1,body:u}}],styles:{header:{fontSize:d,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:h}}}}generatePdf(t){l.a.createPdf(t).print()}getPdfData(t){const e=["36%","32%","32%"],i=["Subject Name","Subject Code","Abbriviation"],n=`Date: ${(new Date).toLocaleString()}`;this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then(r=>{this.generatePdf(this.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",n,r,i,this.mapData(t),"portrait",e,"A4"))})}mapData(t){return t.map(t=>({Name:t.subjectName,Code:t.subjectCode,Abbriviation:t.subjectShortForm}))}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(p.a))},t.\u0275prov=d.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=i("1yk7"),f=i("4hmF"),m=i("fk4S"),S=i("rEr+"),j=i("7zfz"),v=i("3Pt+"),C=i("7kUa");function w(t,e){if(1&t&&(d.Vb(0,"th"),d.Ic(1),d.Ub()),2&t){const t=e.$implicit;d.Db(1),d.Kc(" ",t.header," ")}}function y(t,e){if(1&t&&(d.Vb(0,"tr",12),d.Gc(1,w,2,1,"th",13),d.Vb(2,"th"),d.Ic(3,"Action"),d.Ub(),d.Ub()),2&t){const t=d.gc();d.Db(1),d.nc("ngForOf",t.columns)}}function O(t,e){if(1&t&&(d.Vb(0,"td"),d.Vb(1,"div"),d.Ic(2),d.Ub(),d.Ub()),2&t){const t=e.$implicit,i=d.gc().$implicit;d.Db(2),d.Jc(i[t.field])}}const U=function(t){return["/main/subjects/","subject-details",t]},P=function(t){return["/main/subjects/","subject-edit",t]};function A(t,e){if(1&t){const t=d.Wb();d.Vb(0,"tr",12),d.Gc(1,O,3,1,"td",13),d.Vb(2,"td"),d.Vb(3,"div",14),d.Vb(4,"button",15),d.Ic(5,"View"),d.Ub(),d.Vb(6,"button",16),d.Ic(7,"Edit"),d.Ub(),d.Vb(8,"button",17),d.dc("click",(function(){d.zc(t);const i=e.$implicit;return d.gc().deleteSubject(i._id)})),d.Ic(9,"Delete"),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&t){const t=e.$implicit,i=d.gc();d.Db(1),d.nc("ngForOf",i.columns),d.Db(3),d.nc("routerLink",d.qc(3,U,t._id)),d.Db(2),d.nc("routerLink",d.qc(5,P,t._id))}}function I(t,e){1&t&&(d.Vb(0,"tr"),d.Vb(1,"td",18),d.Ic(2,"No data found."),d.Ub(),d.Ub())}const R=function(){return[5,10,25,50,100]},V=[{path:"",component:(()=>{class t{constructor(t,e,i,n,r){this.dialogService=t,this.toastService=e,this.applicationStateService=i,this.subjectsService=n,this.pdfService=r,this.subjects=[],this.isMobileResolution=!1}ngOnInit(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"subjectName",header:"Subject Name"},{field:"subjectCode",header:"Subject Code"},{field:"subjectShortForm",header:"Abbriviation"}],this.getSubjects()}getSubjects(){this.subjectsService.getSubjects().subscribe(t=>{this.subjects=t.data})}openNew(){this.dialogService.open(g.a,{data:{},width:this.isMobileResolution?"400px":"600px"}).onClose.subscribe(t=>{t&&this.toastService.addSingle("success","panel closed","")})}exportPdf(){this.pdfService.getPdfData(this.subjects)}}return t.\u0275fac=function(e){return new(e||t)(d.Pb(s.a),d.Pb(c.a),d.Pb(o.a),d.Pb(f.a),d.Pb(h))},t.\u0275cmp=d.Jb({type:t,selectors:[["app-subject-list"]],features:[d.Cb([s.a])],decls:16,vars:10,consts:[["legend","subjects",3,"toggleable"],["pRipple","",1,"btn","btn-success","btn-sm","m-1",3,"click"],["pRipple","","type","button","icon","pi pi-file-excel","tooltipPosition","bottom",1,"btn","btn-info","btn-sm","mx-2",3,"click"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","resizableColumns","scrollable","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"ui-g"],[1,"ui-g-10","ui-sm-8"],[2,"float","right"],[1,"ui-g-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],[1,"text-sm"],[4,"ngFor","ngForOf"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-danger","btn-sm",3,"click"],["colspan","4"]],template:function(t,e){1&t&&(d.Vb(0,"p-fieldset",0),d.Vb(1,"div"),d.Vb(2,"button",1),d.dc("click",(function(){return e.openNew()})),d.Ic(3,"Create Subject"),d.Ub(),d.Vb(4,"button",2),d.dc("click",(function(){return e.exportPdf()})),d.Ic(5,"subject report"),d.Ub(),d.Ub(),d.Vb(6,"p-table",3),d.Gc(7,y,4,1,"ng-template",4),d.Gc(8,A,10,7,"ng-template",5),d.Gc(9,I,3,0,"ng-template",6),d.Ub(),d.Vb(10,"div",7),d.Vb(11,"div",8),d.Vb(12,"label",9),d.Ic(13,"Page Size:"),d.Ub(),d.Ub(),d.Vb(14,"div",10),d.Vb(15,"input",11),d.dc("ngModelChange",(function(t){return e.pageSize=t})),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&t&&(d.nc("toggleable",!0),d.Db(6),d.nc("value",e.subjects)("paginator",!0)("resizableColumns",!0)("scrollable",!0)("rows",e.pageSize)("showCurrentPageReport",!0)("rowsPerPageOptions",d.pc(9,R)),d.Db(9),d.nc("ngModel",e.pageSize))},directives:[m.a,S.c,j.e,v.b,C.a,v.k,v.n,n.j,r.d],styles:[""]}),t})()}];let z=(()=>{class t{}return t.\u0275mod=d.Nb({type:t}),t.\u0275inj=d.Mb({factory:function(e){return new(e||t)},imports:[[r.g.forChild(V)],r.g]}),t})();var k=i("EQGD"),D=i("K0h9");i.d(e,"SubjectListModule",(function(){return L}));let L=(()=>{class t{}return t.\u0275mod=d.Nb({type:t}),t.\u0275inj=d.Mb({factory:function(e){return new(e||t)},imports:[[n.b,z,D.a,k.a]]}),t})()},Olgc:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("fXoL"),r=i("7zfz");let s=(()=>{class t{constructor(t){this.messageService=t}addSingle(t,e,i){this.messageService.add({severity:t,summary:e,detail:i})}addMultiple(t){this.messageService.addAll(t)}clear(){this.messageService.clear()}}return t.\u0275fac=function(e){return new(e||t)(n.Zb(r.d))},t.\u0275prov=n.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);