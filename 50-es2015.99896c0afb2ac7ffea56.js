(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{KLHr:function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),r=n("tyNb"),a=n("J7/z"),o=n("AlMu"),s=n("Olgc"),c=n("Jvyb"),l=n("bojg"),b=n("5JmO"),d=n.n(b),p=n("TruH"),u=n.n(p),g=n("uIk+"),f=n("fXoL");d.a.vfs=u.a.pdfMake.vfs;let h=(()=>{class e{constructor(e){this.canvas=e}setTitle(e,t,n,i,r,a,o){let s,c;return"A6"===o?(s=[15,10,0,10],c=8):(s=[15,10,0,10],c=10),[{table:{widths:["100%","0%"],body:[[{image:e,alignment:"center",width:60,height:30}],[{text:t,fontSize:c,alignment:"center",bold:!0}],[{text:n,fontSize:c,alignment:"center"}],[{text:i,fontSize:c,alignment:"center",italics:!0}],[{text:r,fontSize:c,alignment:"center",italics:!0}]]},layout:"noBorders"}]}createTableHeader(e){const t={fila_0:{}};return e.forEach((e,n)=>{t.fila_0["col_"+(+n+1)]={text:e,style:"tableHeader",margin:[0,8,0,0]}}),t}createBody(e,t){const n=[];for(const i in e){const t=[];for(const n in e[i])t.push(e[i][n]);n.push(t)}return t.forEach(e=>{const t=[];for(const n in e)t.push(e[n]);n.push(t)}),n}getDocDefinition(e,t,n,i,r,a,o,s,c,l){const b={header:{title:e,header1:t,header2:n,header3:i},body:{header:a,record:o}},d=this.createBody(this.createTableHeader(b.body.header),b.body.record);let p,u,g;return"A6"===l?(p=[10,110,10,55],u=10,g=7):(u=16,g=10,p=[10,110,10,55]),{pageOrientation:s,pageSize:l,pageMargins:p,header:this.setTitle(r,e,t,n,i,b,l),footer:(e,t)=>({text:"Page "+e.toString()+" of "+t,alignment:"center",margin:[0,30,0,0]}),content:[{style:"tableContent",table:{widths:c,headerRows:1,body:d}}],styles:{header:{fontSize:u,bold:!0},tableHeader:{bold:!0},tableContent:{fontSize:g}}}}generatePdf(e){d.a.createPdf(e).print()}getPdfData(e){const t=["32%","32%","36%"],n=["Parent/Guardian","Parent/Guardian","Student"],i=`Date: ${(new Date).toLocaleString()}`;this.canvas.getBase64Image("./assets/images/schoollogo.jpg").then(r=>{this.generatePdf(this.getDocDefinition("ST. FRANCIS OF ASSISI SECONDARY SCHOOL - KALIINI","P.O BOX 30-90121 - Emali","Tel. No.:072127703",i,r,n,this.mapData(e),"portrait",t,"A4"))})}mapData(e){return e.map(e=>({Name:e.firstParent,Name2:e.secondParent,Code:e.studentID}))}}return e.\u0275fac=function(t){return new(t||e)(f.Zb(g.a))},e.\u0275prov=f.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=n("fk4S"),S=n("rEr+"),v=n("7zfz"),P=n("3Pt+"),w=n("7kUa");function y(e,t){if(1&e&&(f.Vb(0,"th"),f.Ic(1),f.Ub()),2&e){const e=t.$implicit;f.Db(1),f.Kc(" ",e.header," ")}}function I(e,t){if(1&e&&(f.Vb(0,"tr",11),f.Gc(1,y,2,1,"th",12),f.Vb(2,"th"),f.Ic(3,"Student"),f.Ub(),f.Vb(4,"th"),f.Ic(5,"Action"),f.Ub(),f.Ub()),2&e){const e=f.gc();f.Db(1),f.nc("ngForOf",e.columns)}}function D(e,t){if(1&e&&(f.Vb(0,"td"),f.Vb(1,"div"),f.Ic(2),f.Ub(),f.Ub()),2&e){const e=t.$implicit,n=f.gc().$implicit;f.Db(2),f.Jc(n[e.field])}}const U=function(e){return["/main/parents/","parent-details",e]},V=function(e){return["/main/parents/","parent-edit",e]};function z(e,t){if(1&e){const e=f.Wb();f.Vb(0,"tr",11),f.Gc(1,D,3,1,"td",12),f.Vb(2,"td"),f.Ic(3),f.Ub(),f.Vb(4,"td"),f.Vb(5,"div",13),f.Vb(6,"button",14),f.Ic(7,"View"),f.Ub(),f.Vb(8,"button",15),f.Ic(9,"Edit"),f.Ub(),f.Vb(10,"button",16),f.dc("click",(function(){f.zc(e);const n=t.$implicit;return f.gc().deleteParent(n._id)})),f.Ic(11,"Delete"),f.Ub(),f.Ub(),f.Ub(),f.Ub()}if(2&e){const e=t.$implicit,n=f.gc();f.Db(1),f.nc("ngForOf",n.columns),f.Db(2),f.Jc(null==e.studentID?null:e.studentID.studentName),f.Db(3),f.nc("routerLink",f.qc(4,U,e._id)),f.Db(2),f.nc("routerLink",f.qc(6,V,e._id))}}const k=function(){return[5,10,25,50,100]},x=[{path:"",component:(()=>{class e{constructor(e,t,n,i,r){this.dialogService=e,this.toastService=t,this.applicationStateService=n,this.parentsService=i,this.pdfService=r,this.parents=[],this.isMobileResolution=!1}ngOnInit(){this.isMobileResolution=this.applicationStateService.getIsMobileResolution(),this.pageSize=10,this.columns=[{field:"firstParent",header:"Parent/Guardian"},{field:"secondParent",header:"Parent/Guardian"}],this.getparents()}getparents(){this.parentsService.getParents().subscribe(e=>{this.parents=e.data,this.toastService.addSingle("success","Parents Loaded","")},e=>{this.toastService.addSingle("error","sorry, we could not find the data","contact the admin for assitance")})}openNew(){this.dialogService.open(c.a,{data:{},width:this.isMobileResolution?"400px":"600px"}).onClose.subscribe(e=>{e&&this.toastService.addSingle("success","panel closed","")})}exportPdf(){this.pdfService.getPdfData(this.parents)}}return e.\u0275fac=function(t){return new(t||e)(f.Pb(a.a),f.Pb(s.a),f.Pb(o.a),f.Pb(l.a),f.Pb(h))},e.\u0275cmp=f.Jb({type:e,selectors:[["app-parent-list"]],features:[f.Cb([a.a])],decls:15,vars:10,consts:[["legend","Parents",3,"toggleable"],["pRipple","",1,"btn","btn-success","btn-sm","m-1",3,"click"],["pRipple","","type","button","icon","pi pi-file-excel","tooltipPosition","bottom",1,"btn","btn-info","btn-sm","mx-2",3,"click"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","resizableColumns","scrollable","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[1,"ui-g"],[1,"ui-g-10","ui-sm-8"],[2,"float","right"],[1,"ui-g-2","ui-sm-4"],["type","text","pInputText","",3,"ngModel","ngModelChange"],[1,"text-sm"],[4,"ngFor","ngForOf"],[1,"flex"],["pRipple","",1,"btn","btn-info","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-primary","btn-sm",2,"margin-right","16px",3,"routerLink"],["pRipple","",1,"btn","btn-danger","btn-sm",3,"click"]],template:function(e,t){1&e&&(f.Vb(0,"p-fieldset",0),f.Vb(1,"div"),f.Vb(2,"button",1),f.dc("click",(function(){return t.openNew()})),f.Ic(3,"Create Parent"),f.Ub(),f.Vb(4,"button",2),f.dc("click",(function(){return t.exportPdf()})),f.Ic(5,"Parent report"),f.Ub(),f.Ub(),f.Vb(6,"p-table",3),f.Gc(7,I,6,1,"ng-template",4),f.Gc(8,z,12,8,"ng-template",5),f.Ub(),f.Vb(9,"div",6),f.Vb(10,"div",7),f.Vb(11,"label",8),f.Ic(12,"Page Size:"),f.Ub(),f.Ub(),f.Vb(13,"div",9),f.Vb(14,"input",10),f.dc("ngModelChange",(function(e){return t.pageSize=e})),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&e&&(f.nc("toggleable",!0),f.Db(6),f.nc("value",t.parents)("paginator",!0)("resizableColumns",!0)("scrollable",!0)("rows",t.pageSize)("showCurrentPageReport",!0)("rowsPerPageOptions",f.pc(9,k)),f.Db(8),f.nc("ngModel",t.pageSize))},directives:[m.a,S.c,v.e,P.b,w.a,P.k,P.n,i.j,r.d],styles:[""]}),e})()}];let C=(()=>{class e{}return e.\u0275mod=f.Nb({type:e}),e.\u0275inj=f.Mb({factory:function(t){return new(t||e)},imports:[[r.g.forChild(x)],r.g]}),e})();var O=n("EQGD"),R=n("K0h9");n.d(t,"ParentListModule",(function(){return M}));let M=(()=>{class e{}return e.\u0275mod=f.Nb({type:e}),e.\u0275inj=f.Mb({factory:function(t){return new(t||e)},imports:[[i.b,C,R.a,O.a]]}),e})()},Olgc:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL"),r=n("7zfz");let a=(()=>{class e{constructor(e){this.messageService=e}addSingle(e,t,n){this.messageService.add({severity:e,summary:t,detail:n})}addMultiple(e){this.messageService.addAll(e)}clear(){this.messageService.clear()}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(r.d))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);